<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>useLoaderData Hook | React 学习笔记</title>
    <meta name="description" content="系统化学习 React 技术栈的笔记和示例">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/react-note/assets/style.Bb0qzZxj.css" as="style">
    <link rel="preload stylesheet" href="/react-note/vp-icons.css" as="style">
    
    <script type="module" src="/react-note/assets/app.LHfDJyE_.js"></script>
    <link rel="preload" href="/react-note/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/react-note/assets/chunks/theme.BqkJgKR7.js">
    <link rel="modulepreload" href="/react-note/assets/chunks/framework.4lVnIIy3.js">
    <link rel="modulepreload" href="/react-note/assets/router_router-hooks_use-loader-data.md.Csr9kO90.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-78d35f03><!--[--><!--]--><!--[--><span tabindex="-1" data-v-5334567c></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-5334567c>Skip to content</a><!--]--><!----><header class="VPNav" data-v-78d35f03 data-v-bbf3b22f><div class="VPNavBar" data-v-bbf3b22f data-v-f5424d1f><div class="wrapper" data-v-f5424d1f><div class="container" data-v-f5424d1f><div class="title" data-v-f5424d1f><div class="VPNavBarTitle has-sidebar" data-v-f5424d1f data-v-c5c85e89><a class="title" href="/react-note/" data-v-c5c85e89><!--[--><!--]--><!----><span data-v-c5c85e89>React 学习笔记</span><!--[--><!--]--></a></div></div><div class="content" data-v-f5424d1f><div class="content-body" data-v-f5424d1f><!--[--><!--]--><div class="VPNavBarSearch search" data-v-f5424d1f><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-f5424d1f data-v-03f82715><span id="main-nav-aria-label" class="visually-hidden" data-v-03f82715> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/react-note/" tabindex="0" data-v-03f82715 data-v-b09e18f2><!--[--><span data-v-b09e18f2>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/react-note/react-basics/" tabindex="0" data-v-03f82715 data-v-b09e18f2><!--[--><span data-v-b09e18f2>React 基础</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/react-note/react-advanced/" tabindex="0" data-v-03f82715 data-v-b09e18f2><!--[--><span data-v-b09e18f2>React 高级</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/react-note/hooks/" tabindex="0" data-v-03f82715 data-v-b09e18f2><!--[--><span data-v-b09e18f2>React Hooks</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/react-note/router/" tabindex="0" data-v-03f82715 data-v-b09e18f2><!--[--><span data-v-b09e18f2>React Router</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/react-note/redux/" tabindex="0" data-v-03f82715 data-v-b09e18f2><!--[--><span data-v-b09e18f2>Redux</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/react-note/tools/" tabindex="0" data-v-03f82715 data-v-b09e18f2><!--[--><span data-v-b09e18f2>工具</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/react-note/next-js/" tabindex="0" data-v-03f82715 data-v-b09e18f2><!--[--><span data-v-b09e18f2>Next.js</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/react-note/source-code/" tabindex="0" data-v-03f82715 data-v-b09e18f2><!--[--><span data-v-b09e18f2>源码解析</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-f5424d1f data-v-1568f016><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-1568f016 data-v-942c9408 data-v-ae0ce2f0><span class="check" data-v-ae0ce2f0><span class="icon" data-v-ae0ce2f0><!--[--><span class="vpi-sun sun" data-v-942c9408></span><span class="vpi-moon moon" data-v-942c9408></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-f5424d1f data-v-6eb7e544 data-v-fc3b7e18><!--[--><a class="VPSocialLink no-icon" href="https://gitee.com/wangjuntian/jt-react-dc.git" aria-label="gitee" target="_blank" rel="noopener" data-v-fc3b7e18 data-v-40841518><span class="vpi-social-gitee"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-f5424d1f data-v-e36a29ff data-v-3123143a><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-3123143a><span class="vpi-more-horizontal icon" data-v-3123143a></span></button><div class="menu" data-v-3123143a><div class="VPMenu" data-v-3123143a data-v-8280db93><!----><!--[--><!--[--><!----><div class="group" data-v-e36a29ff><div class="item appearance" data-v-e36a29ff><p class="label" data-v-e36a29ff>Appearance</p><div class="appearance-action" data-v-e36a29ff><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-e36a29ff data-v-942c9408 data-v-ae0ce2f0><span class="check" data-v-ae0ce2f0><span class="icon" data-v-ae0ce2f0><!--[--><span class="vpi-sun sun" data-v-942c9408></span><span class="vpi-moon moon" data-v-942c9408></span><!--]--></span></span></button></div></div></div><div class="group" data-v-e36a29ff><div class="item social-links" data-v-e36a29ff><div class="VPSocialLinks social-links-list" data-v-e36a29ff data-v-fc3b7e18><!--[--><a class="VPSocialLink no-icon" href="https://gitee.com/wangjuntian/jt-react-dc.git" aria-label="gitee" target="_blank" rel="noopener" data-v-fc3b7e18 data-v-40841518><span class="vpi-social-gitee"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-f5424d1f data-v-f6eeaab0><span class="container" data-v-f6eeaab0><span class="top" data-v-f6eeaab0></span><span class="middle" data-v-f6eeaab0></span><span class="bottom" data-v-f6eeaab0></span></span></button></div></div></div></div><div class="divider" data-v-f5424d1f><div class="divider-line" data-v-f5424d1f></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-78d35f03 data-v-44271f4a><div class="container" data-v-44271f4a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-44271f4a><span class="vpi-align-left menu-icon" data-v-44271f4a></span><span class="menu-text" data-v-44271f4a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-44271f4a data-v-96fc156d><button data-v-96fc156d>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-78d35f03 data-v-9a9182a0><div class="curtain" data-v-9a9182a0></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-9a9182a0><span class="visually-hidden" id="sidebar-aria-label" data-v-9a9182a0> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-dbc9f01f><section class="VPSidebarItem level-0" data-v-dbc9f01f data-v-7d8d5417><div class="item" role="button" tabindex="0" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><h2 class="text" data-v-7d8d5417>基本使用</h2><!----></div><div class="items" data-v-7d8d5417><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/installation.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>安装</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/mode.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>模式</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/routes.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>路由</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/params.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>传参</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/lazy-loading.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>懒加载</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/operations.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>操作</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/navigation.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>导航</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/error-boundaries.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>边界处理</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-dbc9f01f><section class="VPSidebarItem level-0" data-v-dbc9f01f data-v-7d8d5417><div class="item" role="button" tabindex="0" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><h2 class="text" data-v-7d8d5417>API</h2><!----></div><div class="items" data-v-7d8d5417><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/api/await.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>Await</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/api/link.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>Link</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/api/meta.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>Meta</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/api/navlink.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>NavLink</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/api/redirect.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>redirect</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/api/scroll-restoration.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>ScrollRestoration</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-dbc9f01f><section class="VPSidebarItem level-0 has-active" data-v-dbc9f01f data-v-7d8d5417><div class="item" role="button" tabindex="0" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><h2 class="text" data-v-7d8d5417>Router Hooks</h2><!----></div><div class="items" data-v-7d8d5417><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/router-hooks/use-navigate.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>useNavigate</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/router-hooks/use-navigation.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>useNavigation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/router-hooks/use-params.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>useParams</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/router-hooks/use-search-params.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>useSearchParams</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/router-hooks/use-location.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>useLocation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/router-hooks/use-loader-data.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>useLoaderData</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/router-hooks/use-action-data.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>useActionData</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/router-hooks/use-route-error.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>useRouteError</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7d8d5417 data-v-7d8d5417><div class="item" data-v-7d8d5417><div class="indicator" data-v-7d8d5417></div><a class="VPLink link link" href="/react-note/router/router-hooks/use-submit.html" data-v-7d8d5417><!--[--><p class="text" data-v-7d8d5417>useSubmit</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-78d35f03 data-v-48d6dc22><div class="VPDoc has-sidebar has-aside" data-v-48d6dc22 data-v-d28e506c><!--[--><!--]--><div class="container" data-v-d28e506c><div class="aside" data-v-d28e506c><div class="aside-curtain" data-v-d28e506c></div><div class="aside-container" data-v-d28e506c><div class="aside-content" data-v-d28e506c><div class="VPDocAside" data-v-d28e506c data-v-82fd7148><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-82fd7148 data-v-360f0047><div class="content" data-v-360f0047><div class="outline-marker" data-v-360f0047></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-360f0047>On this page</div><ul class="VPDocOutlineItem root" data-v-360f0047 data-v-babd8176><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-82fd7148></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-d28e506c><div class="content-container" data-v-d28e506c><!--[--><!--]--><main class="main" data-v-d28e506c><div style="position:relative;" class="vp-doc _react-note_router_router-hooks_use-loader-data" data-v-d28e506c><div><h1 id="useloaderdata-hook" tabindex="-1">useLoaderData Hook <a class="header-anchor" href="#useloaderdata-hook" aria-label="Permalink to &quot;useLoaderData Hook&quot;">​</a></h1><p><code>useLoaderData</code> 是 React Router v6.4+ 提供的一个 Hook，用于访问当前路由的 loader 函数返回的数据。它简化了数据获取和组件渲染之间的集成，使组件能够轻松访问预加载的数据。</p><h2 id="基本用法" tabindex="-1">基本用法 <a class="header-anchor" href="#基本用法" aria-label="Permalink to &quot;基本用法&quot;">​</a></h2><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useLoaderData } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;react-router-dom&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在路由配置中定义 loader 函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/products&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> products</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { products };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在组件中使用 useLoaderData 访问数据</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Products</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">products</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useLoaderData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;产品列表&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {products.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">product</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{product.id}&gt;{product.name}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ))}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="语法" tabindex="-1">语法 <a class="header-anchor" href="#语法" aria-label="Permalink to &quot;语法&quot;">​</a></h2><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useLoaderData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h3 id="返回值" tabindex="-1">返回值 <a class="header-anchor" href="#返回值" aria-label="Permalink to &quot;返回值&quot;">​</a></h3><p><code>useLoaderData</code> 返回当前匹配路由的 loader 函数返回的数据。如果 loader 函数返回一个 Promise，则返回 Promise 解析后的值。</p><h2 id="详细说明" tabindex="-1">详细说明 <a class="header-anchor" href="#详细说明" aria-label="Permalink to &quot;详细说明&quot;">​</a></h2><h3 id="工作原理" tabindex="-1">工作原理 <a class="header-anchor" href="#工作原理" aria-label="Permalink to &quot;工作原理&quot;">​</a></h3><ol><li>当路由匹配时，React Router 会调用相应路由的 loader 函数</li><li>loader 函数返回的数据（或 Promise 解析的结果）会被存储在路由上下文中</li><li>组件可以通过 <code>useLoaderData</code> 钩子访问这些数据</li></ol><h3 id="数据类型" tabindex="-1">数据类型 <a class="header-anchor" href="#数据类型" aria-label="Permalink to &quot;数据类型&quot;">​</a></h3><p>loader 函数可以返回任何可序列化的 JavaScript 值，包括：</p><ul><li>对象</li><li>数组</li><li>字符串</li><li>数字</li><li>布尔值</li><li>null</li><li>undefined</li></ul><p>如果返回一个 Promise，React Router 会等待 Promise 解析后再渲染组件。</p><h2 id="示例" tabindex="-1">示例 <a class="header-anchor" href="#示例" aria-label="Permalink to &quot;示例&quot;">​</a></h2><h3 id="基本示例" tabindex="-1">基本示例 <a class="header-anchor" href="#基本示例" aria-label="Permalink to &quot;基本示例&quot;">​</a></h3><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useLoaderData } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;react-router-dom&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response.ok) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;获取用户信息失败&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { status: response.status });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserProfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useLoaderData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{user.name}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;电子邮件: {user.email}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;注册时间: {</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user.createdAt).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toLocaleDateString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="使用路由参数" tabindex="-1">使用路由参数 <a class="header-anchor" href="#使用路由参数" aria-label="Permalink to &quot;使用路由参数&quot;">​</a></h3><p>loader 函数可以接收包含路由参数的对象：</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useLoaderData } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;react-router-dom&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">productId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> params;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`/api/products/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">productId</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response.ok) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;产品未找到&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { status: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">404</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProductDetail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> product</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useLoaderData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{product.name}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;价格: ¥{product.price}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;描述: {product.description}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="处理-url-查询参数" tabindex="-1">处理 URL 查询参数 <a class="header-anchor" href="#处理-url-查询参数" aria-label="Permalink to &quot;处理 URL 查询参数&quot;">​</a></h3><p>loader 函数可以访问请求对象，从中获取查询参数：</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useLoaderData, useSearchParams } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;react-router-dom&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(request.url);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> searchTerm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> url.searchParams.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;q&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> category</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> url.searchParams.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;category&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;all&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`/api/search?q=${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">searchTerm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}&amp;category=${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">category</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SearchResults</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> results</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useLoaderData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">searchParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useSearchParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> searchTerm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> searchParams.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;q&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;搜索结果: &quot;{searchTerm}&quot;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;找到 {results.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} 个结果&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {results.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{item.id}&gt;{item.name}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ))}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="数据依赖" tabindex="-1">数据依赖 <a class="header-anchor" href="#数据依赖" aria-label="Permalink to &quot;数据依赖&quot;">​</a></h3><p>loader 函数可以依赖其他数据源，包括父路由的 loader 数据：</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useLoaderData } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;react-router-dom&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 父路由 loader</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> parentLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 子路由 loader</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> childLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 可以使用 request.signal 处理取消</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`/api/user/orders`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    signal: request.signal</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 父组件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useLoaderData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{user.name}的账户&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Outlet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt; {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 子路由内容 */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 子组件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserOrders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> orders</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useLoaderData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;订单历史&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {orders.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">order</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{order.id}&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            订单 #{order.id} - {order.status}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ))}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="延迟加载数据" tabindex="-1">延迟加载数据 <a class="header-anchor" href="#延迟加载数据" aria-label="Permalink to &quot;延迟加载数据&quot;">​</a></h3><p>使用 <code>defer</code> 函数可以实现数据的延迟加载：</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useLoaderData, defer, Await } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;react-router-dom&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Suspense } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;react&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 立即加载关键数据</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> userPromise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 延迟加载非关键数据</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ordersPromise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/user/orders&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userPromise, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 等待用户数据加载完成</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    orders: ordersPromise    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 不等待订单数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserDashboard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">orders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useLoaderData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 用户数据立即可用 */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{user.name}的仪表板&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 订单数据使用 Suspense 和 Await 处理 */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Suspense</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fallback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;加载订单中...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;}&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> resolve</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{orders}&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          {(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolvedOrders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;最近订单&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                {resolvedOrders.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">order</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{order.id}&gt;订单 #{order.id}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                ))}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          )}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Suspense</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h2><ol><li><p><strong>数据刷新</strong>：当路由参数或查询参数变化时，loader 函数会重新执行，<code>useLoaderData</code> 会返回新的数据。</p></li><li><p><strong>错误处理</strong>：如果 loader 函数抛出错误，React Router 会渲染最近的错误边界（errorElement）。</p></li><li><p><strong>数据共享</strong>：<code>useLoaderData</code> 只返回当前匹配路由的 loader 数据。如果需要访问其他路由的数据，可以使用 <code>useRouteLoaderData</code>。</p></li><li><p><strong>缓存</strong>：React Router 不会自动缓存 loader 数据。如果需要缓存，需要在 loader 函数中实现。</p></li><li><p><strong>类型安全</strong>：在 TypeScript 中，可以为 loader 函数和 <code>useLoaderData</code> 提供类型定义：</p></li></ol><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useLoaderData } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;react-router-dom&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Product</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  price</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  description</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;{ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">products</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Product</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] }&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/products&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> products</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { products };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Products</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">products</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useLoaderData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ReturnType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> loader&gt;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="最佳实践" tabindex="-1">最佳实践 <a class="header-anchor" href="#最佳实践" aria-label="Permalink to &quot;最佳实践&quot;">​</a></h2><ol><li><p><strong>保持 loader 函数简洁</strong>：loader 函数应该专注于数据获取，避免复杂的业务逻辑。</p></li><li><p><strong>使用错误边界</strong>：为每个使用 <code>useLoaderData</code> 的路由提供 <code>errorElement</code>，以处理数据加载错误。</p></li><li><p><strong>考虑用户体验</strong>：对于大型数据集，考虑使用 <code>defer</code> 和 <code>Await</code> 实现渐进式加载。</p></li><li><p><strong>处理加载状态</strong>：使用 <code>useNavigation</code> 钩子显示全局加载状态。</p></li></ol><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useNavigation } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;react-router-dom&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Layout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> navigation</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useNavigation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {navigation.state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;loading&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LoadingIndicator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Outlet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="5"><li><strong>数据验证</strong>：在使用 <code>useLoaderData</code> 返回的数据前进行验证。</li></ol><h2 id="相关-api" tabindex="-1">相关 API <a class="header-anchor" href="#相关-api" aria-label="Permalink to &quot;相关 API&quot;">​</a></h2><ul><li><a href="https://reactrouter.com/en/main/route/loader" target="_blank" rel="noreferrer">loader</a> - 路由数据加载函数</li><li><a href="/react-note/router/router-hooks/use-route-loader-data.html">useRouteLoaderData</a> - 访问特定路由的 loader 数据</li><li><a href="/react-note/router/router-hooks/use-fetcher.html">useFetcher</a> - 在不导航的情况下获取数据</li><li><a href="/react-note/router/router-hooks/use-navigation.html">useNavigation</a> - 获取当前导航状态</li><li><a href="/react-note/router/api/await.html">Await</a> - 处理延迟加载的数据</li></ul></div></div></main><footer class="VPDocFooter" data-v-d28e506c data-v-739bdd24><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-739bdd24><span class="visually-hidden" id="doc-footer-aria-label" data-v-739bdd24>Pager</span><div class="pager" data-v-739bdd24><a class="VPLink link pager-link prev" href="/react-note/router/router-hooks/use-location.html" data-v-739bdd24><!--[--><span class="desc" data-v-739bdd24>Previous page</span><span class="title" data-v-739bdd24>useLocation</span><!--]--></a></div><div class="pager" data-v-739bdd24><a class="VPLink link pager-link next" href="/react-note/router/router-hooks/use-action-data.html" data-v-739bdd24><!--[--><span class="desc" data-v-739bdd24>Next page</span><span class="title" data-v-739bdd24>useActionData</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-78d35f03 data-v-be27716e><div class="container" data-v-be27716e><p class="message" data-v-be27716e>用心记录 React 学习之旅</p><p class="copyright" data-v-be27716e>Copyright © 2023-present</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"hooks_custom-hooks.md\":\"DSXiD_ng\",\"hooks_index.md\":\"DRw37XwJ\",\"hooks_introduction.md\":\"D2pMcUWv\",\"hooks_usecallback.md\":\"GkdX8FLl\",\"hooks_usecontext.md\":\"BYFVDTrR\",\"hooks_usedebugvalue.md\":\"C8SGAN2P\",\"hooks_usedeferredvalue.md\":\"DwEknYzn\",\"hooks_useeffect.md\":\"ck9_B8Ki\",\"hooks_useid.md\":\"BFPvViOu\",\"hooks_useinsertioneffect.md\":\"DAqacYZh\",\"hooks_uselayouteffect.md\":\"BUsVnrtC\",\"hooks_usememo.md\":\"Jtrjdz7E\",\"hooks_usereducer.md\":\"DZZEC1aM\",\"hooks_useref.md\":\"Dl8qJgZu\",\"hooks_usestate.md\":\"fo-aSD71\",\"hooks_usesyncexternalstore.md\":\"CrWXYOIe\",\"hooks_usetransition.md\":\"D-5RB3Hp\",\"index.md\":\"21w6rXyN\",\"next-js_api-routes.md\":\"BxhLDdky\",\"next-js_data-fetching.md\":\"D3WxoVq4\",\"next-js_index.md\":\"CE-3DAND\",\"next-js_introduction.md\":\"CHg0H1vh\",\"next-js_rendering.md\":\"BnuYH99V\",\"next-js_routing.md\":\"B_fg14zJ\",\"react-advanced_component-practice.md\":\"BUWDBR4P\",\"react-advanced_context-api.md\":\"DZdu1reF\",\"react-advanced_error-boundary.md\":\"HJgkdjdt\",\"react-advanced_form-handling.md\":\"Bb_vAGGI\",\"react-advanced_higher-order-components.md\":\"BzR6D7q3\",\"react-advanced_index.md\":\"2lIAjMNE\",\"react-advanced_performance-optimization.md\":\"w96oH7vL\",\"react-advanced_portals.md\":\"D_rIaHxE\",\"react-advanced_refs-dom.md\":\"C7IlMIw_\",\"react-advanced_suspense-lazy.md\":\"QJpJd7WL\",\"react-basics_component-communication.md\":\"BzviCaMj\",\"react-basics_components.md\":\"CIgCzWTU\",\"react-basics_conditional-rendering.md\":\"C0fDsiXJ\",\"react-basics_controlled-components.md\":\"C6uQyLqa\",\"react-basics_event-handling.md\":\"CZnNuX8W\",\"react-basics_index.md\":\"CEzqpxBD\",\"react-basics_introduction.md\":\"DM-bkdXb\",\"react-basics_jsx.md\":\"9WDtWVX5\",\"react-basics_lifecycle.md\":\"CYUmaUCl\",\"react-basics_list-rendering.md\":\"CIkBlmwf\",\"react-basics_props-state.md\":\"BxOV8Z2c\",\"readme.md\":\"iBXTW4Kd\",\"redux_actions.md\":\"D0-_mFrb\",\"redux_basics.md\":\"CNWgQw8o\",\"redux_index.md\":\"D3dkVfrV\",\"redux_middleware.md\":\"DCZzMhjT\",\"redux_reducers.md\":\"Bt_w8oEO\",\"redux_redux-toolkit.md\":\"Bx21s9qt\",\"redux_store.md\":\"CIlNJbJA\",\"router_api_await.md\":\"Lq6o0DnG\",\"router_api_link.md\":\"BBAdBFCV\",\"router_api_meta.md\":\"yO4y3ZPd\",\"router_api_navlink.md\":\"4ub7b-ml\",\"router_api_redirect.md\":\"BL7S72R7\",\"router_api_scroll-restoration.md\":\"B7VsqaNW\",\"router_basic-routing.md\":\"CeeLtTHF\",\"router_data-loading.md\":\"Dzo1DqMc\",\"router_error-boundaries.md\":\"CgZXGnLf\",\"router_form-handling.md\":\"DN55hGhI\",\"router_index.md\":\"96Wjcv3C\",\"router_installation.md\":\"HNcx2M99\",\"router_lazy-loading.md\":\"BY1-CiVr\",\"router_mode.md\":\"C6EgCkIN\",\"router_navigation.md\":\"BM0t5kAl\",\"router_nested-routes.md\":\"DQMFq8qq\",\"router_operations.md\":\"CaPYSkbh\",\"router_params.md\":\"BQEOHioH\",\"router_route-animations.md\":\"B8Kxpn_o\",\"router_route-guards.md\":\"Boaxiby7\",\"router_router-hooks_use-action-data.md\":\"Cjd0CfuK\",\"router_router-hooks_use-loader-data.md\":\"Csr9kO90\",\"router_router-hooks_use-location.md\":\"C08WuhUO\",\"router_router-hooks_use-matches.md\":\"Cb9CPWSl\",\"router_router-hooks_use-navigate.md\":\"D-La0lrE\",\"router_router-hooks_use-navigation.md\":\"nbdxp3IM\",\"router_router-hooks_use-params.md\":\"BmpgAO5m\",\"router_router-hooks_use-route-error.md\":\"B85BBZgu\",\"router_router-hooks_use-route-loader-data.md\":\"oFrhClWH\",\"router_router-hooks_use-search-params.md\":\"LS0oj5-x\",\"router_router-hooks_use-submit.md\":\"kBaIjImm\",\"router_routes.md\":\"dePeVrur\",\"source-code_fiber.md\":\"C-YQNhJg\",\"source-code_hooks-implementation.md\":\"NraQsvk8\",\"source-code_index.md\":\"9J4ggYFH\",\"source-code_react-overview.md\":\"DQSIalAM\",\"source-code_reconciliation.md\":\"Dzod0YIN\",\"tools_babel.md\":\"D657fzmf\",\"tools_css_atomic-css.md\":\"57Wgh9to\",\"tools_css_css-in-js.md\":\"DtOzvRDj\",\"tools_css_css-modules.md\":\"D6I_Z2yz\",\"tools_css_index.md\":\"w5vADpIw\",\"tools_index.md\":\"DfSBXNbM\",\"tools_swc.md\":\"Bva0Z3JK\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"React 学习笔记\",\"description\":\"系统化学习 React 技术栈的笔记和示例\",\"base\":\"/react-note/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"React 基础\",\"link\":\"/react-basics/\",\"activeMatch\":\"/react-basics/\"},{\"text\":\"React 高级\",\"link\":\"/react-advanced/\",\"activeMatch\":\"/react-advanced/\"},{\"text\":\"React Hooks\",\"link\":\"/hooks/\",\"activeMatch\":\"/hooks/\"},{\"text\":\"React Router\",\"link\":\"/router/\",\"activeMatch\":\"/router/\"},{\"text\":\"Redux\",\"link\":\"/redux/\",\"activeMatch\":\"/redux/\"},{\"text\":\"工具\",\"link\":\"/tools/\",\"activeMatch\":\"/tools/\"},{\"text\":\"Next.js\",\"link\":\"/next-js/\",\"activeMatch\":\"/next-js/\"},{\"text\":\"源码解析\",\"link\":\"/source-code/\",\"activeMatch\":\"/source-code/\"}],\"sidebar\":{\"/react-basics/\":[{\"text\":\"React 基础\",\"items\":[{\"text\":\"React 介绍\",\"link\":\"/react-basics/introduction\"},{\"text\":\"JSX 语法\",\"link\":\"/react-basics/jsx\"},{\"text\":\"组件基础\",\"link\":\"/react-basics/components\"},{\"text\":\"组件通信\",\"link\":\"/react-basics/component-communication\"},{\"text\":\"受控组件\",\"link\":\"/react-basics/controlled-components\"},{\"text\":\"Props 与 State\",\"link\":\"/react-basics/props-state\"},{\"text\":\"生命周期\",\"link\":\"/react-basics/lifecycle\"},{\"text\":\"事件处理\",\"link\":\"/react-basics/event-handling\"},{\"text\":\"条件渲染\",\"link\":\"/react-basics/conditional-rendering\"},{\"text\":\"列表渲染\",\"link\":\"/react-basics/list-rendering\"}]}],\"/react-advanced/\":[{\"text\":\"React 高级特性\",\"items\":[{\"text\":\"表单处理\",\"link\":\"/react-advanced/form-handling\"},{\"text\":\"Context API\",\"link\":\"/react-advanced/context-api\"},{\"text\":\"Refs 和 DOM\",\"link\":\"/react-advanced/refs-dom\"},{\"text\":\"错误边界\",\"link\":\"/react-advanced/error-boundary\"},{\"text\":\"高阶组件\",\"link\":\"/react-advanced/higher-order-components\"},{\"text\":\"Portals\",\"link\":\"/react-advanced/portals\"},{\"text\":\"Suspense异步组件\",\"link\":\"/react-advanced/suspense-lazy\"},{\"text\":\"组件实战\",\"link\":\"/react-advanced/component-practice\"},{\"text\":\"性能优化\",\"link\":\"/react-advanced/performance-optimization\"}]}],\"/hooks/\":[{\"text\":\"React Hooks\",\"items\":[{\"text\":\"Hooks 简介\",\"link\":\"/hooks/introduction\"},{\"text\":\"useState\",\"link\":\"/hooks/useState\"},{\"text\":\"useEffect\",\"link\":\"/hooks/useEffect\"},{\"text\":\"useContext\",\"link\":\"/hooks/useContext\"},{\"text\":\"useReducer\",\"link\":\"/hooks/useReducer\"},{\"text\":\"useCallback\",\"link\":\"/hooks/useCallback\"},{\"text\":\"useMemo\",\"link\":\"/hooks/useMemo\"},{\"text\":\"useRef\",\"link\":\"/hooks/useRef\"},{\"text\":\"useLayoutEffect\",\"link\":\"/hooks/useLayoutEffect\"},{\"text\":\"useInsertionEffect\",\"link\":\"/hooks/useInsertionEffect\"},{\"text\":\"useDeferredValue\",\"link\":\"/hooks/useDeferredValue\"},{\"text\":\"useTransition\",\"link\":\"/hooks/useTransition\"},{\"text\":\"useSyncExternalStore\",\"link\":\"/hooks/useSyncExternalStore\"},{\"text\":\"useId\",\"link\":\"/hooks/useId\"},{\"text\":\"useDebugValue\",\"link\":\"/hooks/useDebugValue\"},{\"text\":\"自定义 Hooks\",\"link\":\"/hooks/custom-hooks\"}]}],\"/router/\":[{\"text\":\"基本使用\",\"items\":[{\"text\":\"安装\",\"link\":\"/router/installation\"},{\"text\":\"模式\",\"link\":\"/router/mode\"},{\"text\":\"路由\",\"link\":\"/router/routes\"},{\"text\":\"传参\",\"link\":\"/router/params\"},{\"text\":\"懒加载\",\"link\":\"/router/lazy-loading\"},{\"text\":\"操作\",\"link\":\"/router/operations\"},{\"text\":\"导航\",\"link\":\"/router/navigation\"},{\"text\":\"边界处理\",\"link\":\"/router/error-boundaries\"}]},{\"text\":\"API\",\"items\":[{\"text\":\"Await\",\"link\":\"/router/api/await\"},{\"text\":\"Link\",\"link\":\"/router/api/link\"},{\"text\":\"Meta\",\"link\":\"/router/api/meta\"},{\"text\":\"NavLink\",\"link\":\"/router/api/navlink\"},{\"text\":\"redirect\",\"link\":\"/router/api/redirect\"},{\"text\":\"ScrollRestoration\",\"link\":\"/router/api/scroll-restoration\"}]},{\"text\":\"Router Hooks\",\"items\":[{\"text\":\"useNavigate\",\"link\":\"/router/router-hooks/use-navigate\"},{\"text\":\"useNavigation\",\"link\":\"/router/router-hooks/use-navigation\"},{\"text\":\"useParams\",\"link\":\"/router/router-hooks/use-params\"},{\"text\":\"useSearchParams\",\"link\":\"/router/router-hooks/use-search-params\"},{\"text\":\"useLocation\",\"link\":\"/router/router-hooks/use-location\"},{\"text\":\"useLoaderData\",\"link\":\"/router/router-hooks/use-loader-data\"},{\"text\":\"useActionData\",\"link\":\"/router/router-hooks/use-action-data\"},{\"text\":\"useRouteError\",\"link\":\"/router/router-hooks/use-route-error\"},{\"text\":\"useSubmit\",\"link\":\"/router/router-hooks/use-submit\"}]}],\"/redux/\":[{\"text\":\"Redux\",\"items\":[{\"text\":\"Redux 基础\",\"link\":\"/redux/basics\"},{\"text\":\"Actions\",\"link\":\"/redux/actions\"},{\"text\":\"Reducers\",\"link\":\"/redux/reducers\"},{\"text\":\"Store\",\"link\":\"/redux/store\"},{\"text\":\"Redux Toolkit\",\"link\":\"/redux/redux-toolkit\"},{\"text\":\"Redux 中间件\",\"link\":\"/redux/middleware\"}]}],\"/next-js/\":[{\"text\":\"Next.js\",\"items\":[{\"text\":\"Next.js 简介\",\"link\":\"/next-js/introduction\"},{\"text\":\"路由系统\",\"link\":\"/next-js/routing\"},{\"text\":\"数据获取\",\"link\":\"/next-js/data-fetching\"},{\"text\":\"SSR vs SSG\",\"link\":\"/next-js/rendering\"},{\"text\":\"API 路由\",\"link\":\"/next-js/api-routes\"}]}],\"/source-code/\":[{\"text\":\"源码解析\",\"items\":[{\"text\":\"React 源码概览\",\"link\":\"/source-code/react-overview\"},{\"text\":\"Fiber 架构\",\"link\":\"/source-code/fiber\"},{\"text\":\"调和过程\",\"link\":\"/source-code/reconciliation\"},{\"text\":\"Hooks 实现\",\"link\":\"/source-code/hooks-implementation\"}]}],\"/tools/\":[{\"text\":\"React开发工具\",\"items\":[{\"text\":\"工具概览\",\"link\":\"/tools/\"},{\"text\":\"Babel\",\"link\":\"/tools/babel\"},{\"text\":\"SWC\",\"link\":\"/tools/swc\"},{\"text\":\"CSS方案\",\"link\":\"/tools/css/\"}]}]},\"socialLinks\":[{\"icon\":\"gitee\",\"link\":\"https://gitee.com/wangjuntian/jt-react-dc.git\"}],\"footer\":{\"message\":\"用心记录 React 学习之旅\",\"copyright\":\"Copyright © 2023-present\"},\"search\":{\"provider\":\"local\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>