<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第12章：构建和运行 TypeScript | TypeScript 设计与实践研究</title>
    <meta name="description" content="深入研究 TypeScript 的类型系统、设计模式和最佳实践">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/typescript-note/assets/style.CQeHkVGz.css" as="style">
    <link rel="preload stylesheet" href="/typescript-note/vp-icons.css" as="style">
    
    <script type="module" src="/typescript-note/assets/app.Dgw5jMTb.js"></script>
    <link rel="preload" href="/typescript-note/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/typescript-note/assets/chunks/theme.B8w4sm-n.js">
    <link rel="modulepreload" href="/typescript-note/assets/chunks/framework.C6BsaGkr.js">
    <link rel="modulepreload" href="/typescript-note/assets/programming-typescript_chapter12.md.D39GctRn.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-1af9b1e5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-53e6f252></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-53e6f252>Skip to content</a><!--]--><!----><header class="VPNav" data-v-1af9b1e5 data-v-342800c2><div class="VPNavBar" data-v-342800c2 data-v-09b38409><div class="wrapper" data-v-09b38409><div class="container" data-v-09b38409><div class="title" data-v-09b38409><div class="VPNavBarTitle has-sidebar" data-v-09b38409 data-v-fc2a25a3><a class="title" href="/typescript-note/" data-v-fc2a25a3><!--[--><!--]--><!----><span data-v-fc2a25a3>TypeScript 设计与实践研究</span><!--[--><!--]--></a></div></div><div class="content" data-v-09b38409><div class="content-body" data-v-09b38409><!--[--><!--]--><div class="VPNavBarSearch search" data-v-09b38409><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-09b38409 data-v-ab5d7bda><span id="main-nav-aria-label" class="visually-hidden" data-v-ab5d7bda> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/typescript-note/" tabindex="0" data-v-ab5d7bda data-v-d609ca08><!--[--><span data-v-d609ca08>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/typescript-note/programming-typescript/" tabindex="0" data-v-ab5d7bda data-v-d609ca08><!--[--><span data-v-d609ca08>书籍研究</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/typescript-note/you-dont-know-js/" tabindex="0" data-v-ab5d7bda data-v-d609ca08><!--[--><span data-v-d609ca08>JavaScript深入</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/typescript-note/type-challenges/" tabindex="0" data-v-ab5d7bda data-v-d609ca08><!--[--><span data-v-d609ca08>类型挑战</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/typescript-note/tsconfig/" tabindex="0" data-v-ab5d7bda data-v-d609ca08><!--[--><span data-v-d609ca08>TSConfig</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/typescript-note/examples/" tabindex="0" data-v-ab5d7bda data-v-d609ca08><!--[--><span data-v-d609ca08>示例代码</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/typescript-note/utils/" tabindex="0" data-v-ab5d7bda data-v-d609ca08><!--[--><span data-v-d609ca08>工具函数</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-09b38409 data-v-6399b07a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6399b07a data-v-ebbed7a4 data-v-ceda2efa><span class="check" data-v-ceda2efa><span class="icon" data-v-ceda2efa><!--[--><span class="vpi-sun sun" data-v-ebbed7a4></span><span class="vpi-moon moon" data-v-ebbed7a4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-09b38409 data-v-360a9055 data-v-006b334d><!--[--><a class="VPSocialLink no-icon" href="https://gitee.com/wangjuntian/jt-typescript-design" aria-label="gitee" target="_blank" rel="noopener" data-v-006b334d data-v-649e5b6a><span class="vpi-social-gitee"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-09b38409 data-v-36479773 data-v-46baa711><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-46baa711><span class="vpi-more-horizontal icon" data-v-46baa711></span></button><div class="menu" data-v-46baa711><div class="VPMenu" data-v-46baa711 data-v-5ca0f870><!----><!--[--><!--[--><!----><div class="group" data-v-36479773><div class="item appearance" data-v-36479773><p class="label" data-v-36479773>外观</p><div class="appearance-action" data-v-36479773><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-36479773 data-v-ebbed7a4 data-v-ceda2efa><span class="check" data-v-ceda2efa><span class="icon" data-v-ceda2efa><!--[--><span class="vpi-sun sun" data-v-ebbed7a4></span><span class="vpi-moon moon" data-v-ebbed7a4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-36479773><div class="item social-links" data-v-36479773><div class="VPSocialLinks social-links-list" data-v-36479773 data-v-006b334d><!--[--><a class="VPSocialLink no-icon" href="https://gitee.com/wangjuntian/jt-typescript-design" aria-label="gitee" target="_blank" rel="noopener" data-v-006b334d data-v-649e5b6a><span class="vpi-social-gitee"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-09b38409 data-v-6c76f482><span class="container" data-v-6c76f482><span class="top" data-v-6c76f482></span><span class="middle" data-v-6c76f482></span><span class="bottom" data-v-6c76f482></span></span></button></div></div></div></div><div class="divider" data-v-09b38409><div class="divider-line" data-v-09b38409></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-1af9b1e5 data-v-eecda30f><div class="container" data-v-eecda30f><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-eecda30f><span class="vpi-align-left menu-icon" data-v-eecda30f></span><span class="menu-text" data-v-eecda30f>菜单</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-eecda30f data-v-6c832685><button data-v-6c832685>返回顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-1af9b1e5 data-v-8428e27d><div class="curtain" data-v-8428e27d></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-8428e27d><span class="visually-hidden" id="sidebar-aria-label" data-v-8428e27d> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-9ec37311><section class="VPSidebarItem level-0 has-active" data-v-9ec37311 data-v-b553944a><div class="item" role="button" tabindex="0" data-v-b553944a><div class="indicator" data-v-b553944a></div><h2 class="text" data-v-b553944a>《Programming TypeScript》研究</h2><!----></div><div class="items" data-v-b553944a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b553944a data-v-b553944a><div class="item" data-v-b553944a><div class="indicator" data-v-b553944a></div><a class="VPLink link link" href="/typescript-note/programming-typescript/" data-v-b553944a><!--[--><p class="text" data-v-b553944a>概述</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b553944a data-v-b553944a><div class="item" data-v-b553944a><div class="indicator" data-v-b553944a></div><a class="VPLink link link" href="/typescript-note/programming-typescript/preface.html" data-v-b553944a><!--[--><p class="text" data-v-b553944a>前言</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b553944a data-v-b553944a><div class="item" data-v-b553944a><div class="indicator" data-v-b553944a></div><a class="VPLink link link" href="/typescript-note/programming-typescript/chapter1.html" data-v-b553944a><!--[--><p class="text" data-v-b553944a>第1章：介绍</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b553944a data-v-b553944a><div class="item" data-v-b553944a><div class="indicator" data-v-b553944a></div><a class="VPLink link link" href="/typescript-note/programming-typescript/chapter2.html" data-v-b553944a><!--[--><p class="text" data-v-b553944a>第2章：TypeScript概览</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b553944a data-v-b553944a><div class="item" data-v-b553944a><div class="indicator" data-v-b553944a></div><a class="VPLink link link" href="/typescript-note/programming-typescript/chapter3.html" data-v-b553944a><!--[--><p class="text" data-v-b553944a>第3章：类型系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b553944a data-v-b553944a><div class="item" data-v-b553944a><div class="indicator" data-v-b553944a></div><a class="VPLink link link" href="/typescript-note/programming-typescript/chapter4.html" data-v-b553944a><!--[--><p class="text" data-v-b553944a>第4章：函数</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b553944a data-v-b553944a><div class="item" data-v-b553944a><div class="indicator" data-v-b553944a></div><a class="VPLink link link" href="/typescript-note/programming-typescript/chapter5.html" data-v-b553944a><!--[--><p class="text" data-v-b553944a>第5章：类和接口</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b553944a data-v-b553944a><div class="item" data-v-b553944a><div class="indicator" data-v-b553944a></div><a class="VPLink link link" href="/typescript-note/programming-typescript/chapter6.html" data-v-b553944a><!--[--><p class="text" data-v-b553944a>第6章：高级类型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b553944a data-v-b553944a><div class="item" data-v-b553944a><div class="indicator" data-v-b553944a></div><a class="VPLink link link" href="/typescript-note/programming-typescript/chapter7.html" data-v-b553944a><!--[--><p class="text" data-v-b553944a>第7章：错误处理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b553944a data-v-b553944a><div class="item" data-v-b553944a><div class="indicator" data-v-b553944a></div><a class="VPLink link link" href="/typescript-note/programming-typescript/chapter8.html" data-v-b553944a><!--[--><p class="text" data-v-b553944a>第8章：异步编程、并发和并行</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b553944a data-v-b553944a><div class="item" data-v-b553944a><div class="indicator" data-v-b553944a></div><a class="VPLink link link" href="/typescript-note/programming-typescript/chapter9.html" data-v-b553944a><!--[--><p class="text" data-v-b553944a>第9章：前后端框架</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b553944a data-v-b553944a><div class="item" data-v-b553944a><div class="indicator" data-v-b553944a></div><a class="VPLink link link" href="/typescript-note/programming-typescript/chapter10.html" data-v-b553944a><!--[--><p class="text" data-v-b553944a>第10章：命名空间和模块</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b553944a data-v-b553944a><div class="item" data-v-b553944a><div class="indicator" data-v-b553944a></div><a class="VPLink link link" href="/typescript-note/programming-typescript/chapter11.html" data-v-b553944a><!--[--><p class="text" data-v-b553944a>第11章：与JavaScript互操作</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b553944a data-v-b553944a><div class="item" data-v-b553944a><div class="indicator" data-v-b553944a></div><a class="VPLink link link" href="/typescript-note/programming-typescript/chapter12.html" data-v-b553944a><!--[--><p class="text" data-v-b553944a>第12章：构建和运行 typescript</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-1af9b1e5 data-v-cfe867cc><div class="VPDoc has-sidebar has-aside" data-v-cfe867cc data-v-01e6412c><!--[--><!--]--><div class="container" data-v-01e6412c><div class="aside" data-v-01e6412c><div class="aside-curtain" data-v-01e6412c></div><div class="aside-container" data-v-01e6412c><div class="aside-content" data-v-01e6412c><div class="VPDocAside" data-v-01e6412c data-v-925a6ec8><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-925a6ec8 data-v-d842d008><div class="content" data-v-d842d008><div class="outline-marker" data-v-d842d008></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-d842d008>本页内容</div><ul class="VPDocOutlineItem root" data-v-d842d008 data-v-97c49133><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-925a6ec8></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-01e6412c><div class="content-container" data-v-01e6412c><!--[--><!--]--><main class="main" data-v-01e6412c><div style="position:relative;" class="vp-doc _typescript-note_programming-typescript_chapter12" data-v-01e6412c><div><h1 id="第12章-构建和运行-typescript" tabindex="-1">第12章：构建和运行 TypeScript <a class="header-anchor" href="#第12章-构建和运行-typescript" aria-label="Permalink to &quot;第12章：构建和运行 TypeScript&quot;">​</a></h1><h2 id="章节概述" tabindex="-1">章节概述 <a class="header-anchor" href="#章节概述" aria-label="Permalink to &quot;章节概述&quot;">​</a></h2><p>开发TypeScript应用和JavaScript应用的区别在于：TypeScript需要先编译成JavaScript才能运行。这个章节专门讲解如何高效地构建和运行TypeScript项目。</p><p>本章涵盖的核心内容：</p><ul><li><strong>构建TypeScript应用的核心概念</strong></li><li><strong>在浏览器中构建和运行应用</strong></li><li><strong>发布NPM包的完整流程</strong></li></ul><p>无论你是想部署到生产环境，还是想发布自己的TypeScript库，本章都将为你提供完整的实践指南。</p><h2 id="构建typescript项目的要点" tabindex="-1">构建TypeScript项目的要点 <a class="header-anchor" href="#构建typescript项目的要点" aria-label="Permalink to &quot;构建TypeScript项目的要点&quot;">​</a></h2><h3 id="构建过程中需要做什么" tabindex="-1">构建过程中需要做什么 <a class="header-anchor" href="#构建过程中需要做什么" aria-label="Permalink to &quot;构建过程中需要做什么&quot;">​</a></h3><p>在构建TypeScript应用时，你需要处理以下几个方面：</p><ol><li><strong>代码编译</strong>：将TypeScript代码编译为JavaScript</li><li><strong>浏览器运行</strong>：让编译后的代码能在浏览器中正常运行</li><li><strong>NPM发布</strong>：将你的TypeScript项目打包并发布到NPM</li></ol><h3 id="typescript独有的特点" tabindex="-1">TypeScript独有的特点 <a class="header-anchor" href="#typescript独有的特点" aria-label="Permalink to &quot;TypeScript独有的特点&quot;">​</a></h3><p>TypeScript应用的构建过程和纯JavaScript应用有所不同，主要体现在：</p><ul><li><strong>编译步骤</strong>：必须先编译TypeScript到JavaScript</li><li><strong>类型声明</strong>：需要生成<code>.d.ts</code>类型声明文件</li><li><strong>工具链整合</strong>：需要配置相应的构建工具</li></ul><h2 id="项目结构的最佳实践" tabindex="-1">项目结构的最佳实践 <a class="header-anchor" href="#项目结构的最佳实践" aria-label="Permalink to &quot;项目结构的最佳实践&quot;">​</a></h2><h3 id="推荐的目录结构" tabindex="-1">推荐的目录结构 <a class="header-anchor" href="#推荐的目录结构" aria-label="Permalink to &quot;推荐的目录结构&quot;">​</a></h3><p>建议使用这样的项目结构来组织你的TypeScript代码：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>my-project/</span></span>
<span class="line"><span>├── src/           # 源代码目录</span></span>
<span class="line"><span>│   ├── index.ts</span></span>
<span class="line"><span>│   ├── utils.ts</span></span>
<span class="line"><span>│   └── types.ts</span></span>
<span class="line"><span>├── dist/          # 编译输出目录</span></span>
<span class="line"><span>├── tsconfig.json  # TypeScript配置文件</span></span>
<span class="line"><span>└── package.json   # 项目配置文件</span></span></code></pre></div><h3 id="为什么要采用这种结构" tabindex="-1">为什么要采用这种结构？ <a class="header-anchor" href="#为什么要采用这种结构" aria-label="Permalink to &quot;为什么要采用这种结构？&quot;">​</a></h3><ol><li><strong>源码分离</strong>：将TypeScript源代码放在<code>src/</code>文件夹中</li><li><strong>输出隔离</strong>：编译后的JavaScript代码放在<code>dist/</code>文件夹中</li><li><strong>工具集成</strong>：这种结构便于与各种构建工具集成</li><li><strong>版本控制</strong>：可以轻松配置<code>.gitignore</code>忽略生成的文件</li></ol><p>这种结构在TypeScript社区中被广泛采用，也是大多数构建工具的默认配置。</p><h2 id="typescript编译器生成的文件类型" tabindex="-1">TypeScript编译器生成的文件类型 <a class="header-anchor" href="#typescript编译器生成的文件类型" aria-label="Permalink to &quot;TypeScript编译器生成的文件类型&quot;">​</a></h2><h3 id="编译产物总览" tabindex="-1">编译产物总览 <a class="header-anchor" href="#编译产物总览" aria-label="Permalink to &quot;编译产物总览&quot;">​</a></h3><p>当你编译TypeScript程序时，TSC（TypeScript编译器）会为你生成几种不同类型的文件：</p><table tabindex="0"><thead><tr><th>文件类型</th><th>扩展名</th><th>是否默认生成</th><th>用途</th></tr></thead><tbody><tr><td><strong>JavaScript文件</strong></td><td><code>.js</code></td><td>是</td><td>可以直接运行的JavaScript代码</td></tr><tr><td><strong>Source Maps</strong></td><td><code>.js.map</code></td><td>否</td><td>用于调试，映射JS代码到TS源码</td></tr><tr><td><strong>类型声明文件</strong></td><td><code>.d.ts</code></td><td>否</td><td>为其他TypeScript项目提供类型信息</td></tr><tr><td><strong>声明映射文件</strong></td><td><code>.d.ts.map</code></td><td>否</td><td>映射类型声明到源码位置</td></tr></tbody></table><h3 id="各种文件的作用详解" tabindex="-1">各种文件的作用详解 <a class="header-anchor" href="#各种文件的作用详解" aria-label="Permalink to &quot;各种文件的作用详解&quot;">​</a></h3><h4 id="_1-javascript文件-js" tabindex="-1">1. JavaScript文件（.js） <a class="header-anchor" href="#_1-javascript文件-js" aria-label="Permalink to &quot;1. JavaScript文件（.js）&quot;">​</a></h4><ul><li><strong>作用</strong>：这是编译后的主要产物，包含可以运行的JavaScript代码</li><li><strong>特点</strong>：TSC会将TypeScript语法转换为对应的JavaScript，移除所有类型注解</li></ul><h4 id="_2-source-maps-js-map" tabindex="-1">2. Source Maps（.js.map） <a class="header-anchor" href="#_2-source-maps-js-map" aria-label="Permalink to &quot;2. Source Maps（.js.map）&quot;">​</a></h4><ul><li><strong>作用</strong>：帮助调试，让你在浏览器开发者工具中看到原始的TypeScript代码</li><li><strong>开启方式</strong>：在<code>tsconfig.json</code>中设置<code>&quot;sourceMap&quot;: true</code></li><li><strong>调试价值</strong>：当代码出错时，可以直接定位到TypeScript源文件的具体行</li></ul><h4 id="_3-类型声明文件-d-ts" tabindex="-1">3. 类型声明文件（.d.ts） <a class="header-anchor" href="#_3-类型声明文件-d-ts" aria-label="Permalink to &quot;3. 类型声明文件（.d.ts）&quot;">​</a></h4><ul><li><strong>作用</strong>：为你的库提供类型信息，让其他TypeScript项目可以获得类型支持</li><li><strong>开启方式</strong>：在<code>tsconfig.json</code>中设置<code>&quot;declaration&quot;: true</code></li><li><strong>使用场景</strong>：发布NPM包时必须包含，让使用者获得完整的类型支持</li></ul><h4 id="_4-声明映射文件-d-ts-map" tabindex="-1">4. 声明映射文件（.d.ts.map） <a class="header-anchor" href="#_4-声明映射文件-d-ts-map" aria-label="Permalink to &quot;4. 声明映射文件（.d.ts.map）&quot;">​</a></h4><ul><li><strong>作用</strong>：将类型声明文件映射回原始TypeScript源码</li><li><strong>开启方式</strong>：在<code>tsconfig.json</code>中设置<code>&quot;declarationMap&quot;: true</code></li><li><strong>调试价值</strong>：在IDE中可以直接跳转到源码定义</li></ul><h3 id="配置编译产物" tabindex="-1">配置编译产物 <a class="header-anchor" href="#配置编译产物" aria-label="Permalink to &quot;配置编译产物&quot;">​</a></h3><p>在<code>tsconfig.json</code>中控制生成哪些文件：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;outDir&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 输出目录</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;sourceMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 生成source map</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;declaration&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 生成类型声明文件</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;declarationMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 生成声明映射文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>通过合理配置这些选项，你可以根据项目需求生成相应的编译产物，为开发、调试和发布提供完整的支持。</p><h2 id="编译目标的选择" tabindex="-1">编译目标的选择 <a class="header-anchor" href="#编译目标的选择" aria-label="Permalink to &quot;编译目标的选择&quot;">​</a></h2><h3 id="什么是编译目标" tabindex="-1">什么是编译目标？ <a class="header-anchor" href="#什么是编译目标" aria-label="Permalink to &quot;什么是编译目标？&quot;">​</a></h3><p>编译目标（Compile Target）决定了TypeScript编译器将你的代码转换成哪个版本的JavaScript。这是一个非常重要的配置，因为：</p><ul><li><strong>程序员无法控制用户的JavaScript环境</strong>：你不知道用户使用什么浏览器或Node.js版本</li><li><strong>兼容性考虑</strong>：许多JavaScript程序需要在多种平台上运行</li><li><strong>功能支持</strong>：不同JavaScript版本支持的语言特性不同</li></ul><h3 id="编译目标的配置方式" tabindex="-1">编译目标的配置方式 <a class="header-anchor" href="#编译目标的配置方式" aria-label="Permalink to &quot;编译目标的配置方式&quot;">​</a></h3><h4 id="_1-后端javascript程序" tabindex="-1">1. 后端JavaScript程序 <a class="header-anchor" href="#_1-后端javascript程序" aria-label="Permalink to &quot;1. 后端JavaScript程序&quot;">​</a></h4><p>如果你控制后端JavaScript程序运行的环境，可以直接设置目标：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2015&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 如果你知道服务器支持ES2015</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_2-开源项目" tabindex="-1">2. 开源项目 <a class="header-anchor" href="#_2-开源项目" aria-label="Permalink to &quot;2. 开源项目&quot;">​</a></h4><p>如果你发布开源的JavaScript包，最好选择保守的兼容性策略：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es5&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 最大兼容性，但功能有限</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_3-浏览器应用" tabindex="-1">3. 浏览器应用 <a class="header-anchor" href="#_3-浏览器应用" aria-label="Permalink to &quot;3. 浏览器应用&quot;">​</a></h4><p>对于浏览器应用，你有几种选择：</p><p><strong>选择A：使用现代浏览器特性</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2020&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 支持现代特性，但可能需要polyfill</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>选择B：最大兼容性</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es5&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 支持旧浏览器，但特性有限</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="javascript版本支持的特性对比" tabindex="-1">JavaScript版本支持的特性对比 <a class="header-anchor" href="#javascript版本支持的特性对比" aria-label="Permalink to &quot;JavaScript版本支持的特性对比&quot;">​</a></h3><p>不同编译目标支持的JavaScript特性：</p><h4 id="es5-2009" tabindex="-1">ES5 (2009) <a class="header-anchor" href="#es5-2009" aria-label="Permalink to &quot;ES5 (2009)&quot;">​</a></h4><ul><li>✅ 基础对象和函数</li><li>❌ 不支持：箭头函数、类、模块、Promise等现代特性</li><li>💡 <strong>优点</strong>：几乎所有浏览器都支持</li><li>💡 <strong>缺点</strong>：生成的代码较冗长</li></ul><h4 id="es2015-es6-2015" tabindex="-1">ES2015/ES6 (2015) <a class="header-anchor" href="#es2015-es6-2015" aria-label="Permalink to &quot;ES2015/ES6 (2015)&quot;">​</a></h4><ul><li>✅ 箭头函数、类、模块、Promise、let/const</li><li>✅ 解构赋值、模板字符串</li><li>💡 <strong>平衡选择</strong>：现代特性 + 良好兼容性</li></ul><h4 id="es2020-2020" tabindex="-1">ES2020 (2020) <a class="header-anchor" href="#es2020-2020" aria-label="Permalink to &quot;ES2020 (2020)&quot;">​</a></h4><ul><li>✅ 可选链操作符（?.）、空值合并操作符（??）</li><li>✅ BigInt、动态导入</li><li>💡 <strong>现代选择</strong>：最新特性，但需要考虑兼容性</li></ul><h3 id="编译目标选择策略" tabindex="-1">编译目标选择策略 <a class="header-anchor" href="#编译目标选择策略" aria-label="Permalink to &quot;编译目标选择策略&quot;">​</a></h3><h4 id="根据运行环境选择" tabindex="-1">根据运行环境选择 <a class="header-anchor" href="#根据运行环境选择" aria-label="Permalink to &quot;根据运行环境选择&quot;">​</a></h4><ol><li><strong>Node.js应用</strong></li></ol><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2018&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Node.js 10+ 支持</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="2"><li><strong>现代浏览器应用</strong></li></ol><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2017&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Chrome 58+, Firefox 52+</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="3"><li><strong>需要支持旧浏览器</strong></li></ol><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;lib&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2015&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dom&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 使用库文件提供类型支持</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="4"><li><strong>NPM包发布</strong></li></ol><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es5&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 让使用者决定是否需要polyfill</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="转换示例-不同目标的输出差异" tabindex="-1">转换示例：不同目标的输出差异 <a class="header-anchor" href="#转换示例-不同目标的输出差异" aria-label="Permalink to &quot;转换示例：不同目标的输出差异&quot;">​</a></h3><p>假设有这样的TypeScript代码：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> users</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Bob&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> adults</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> names</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> adults.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.name);</span></span></code></pre></div><h4 id="编译到es5的结果" tabindex="-1">编译到ES5的结果： <a class="header-anchor" href="#编译到es5的结果" aria-label="Permalink to &quot;编译到ES5的结果：&quot;">​</a></h4><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Bob&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> adults </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> names </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> adults.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.name; });</span></span></code></pre></div><h4 id="编译到es2015的结果" tabindex="-1">编译到ES2015的结果： <a class="header-anchor" href="#编译到es2015的结果" aria-label="Permalink to &quot;编译到ES2015的结果：&quot;">​</a></h4><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> users</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Bob&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> adults</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> names</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> adults.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.name);</span></span></code></pre></div><p>可以看到，ES2015目标保留了现代JavaScript语法，而ES5目标转换为兼容的旧语法。</p><h3 id="实际项目中的最佳实践" tabindex="-1">实际项目中的最佳实践 <a class="header-anchor" href="#实际项目中的最佳实践" aria-label="Permalink to &quot;实际项目中的最佳实践&quot;">​</a></h3><ol><li><strong>了解目标用户</strong>：调查你的用户使用什么浏览器/Node.js版本</li><li><strong>渐进增强</strong>：从保守的目标开始，逐步升级</li><li><strong>使用工具辅助</strong>：利用Babel、Webpack等工具处理polyfill</li><li><strong>监控兼容性</strong>：使用分析工具了解用户的实际环境</li><li><strong>文档说明</strong>：在README中说明支持的环境要求</li></ol><p>选择合适的编译目标是平衡功能性和兼容性的关键决策，需要根据具体项目需求来确定。</p><h2 id="typescript编译器的转译能力" tabindex="-1">TypeScript编译器的转译能力 <a class="header-anchor" href="#typescript编译器的转译能力" aria-label="Permalink to &quot;TypeScript编译器的转译能力&quot;">​</a></h2><h3 id="javascript语言特性的发展历程" tabindex="-1">JavaScript语言特性的发展历程 <a class="header-anchor" href="#javascript语言特性的发展历程" aria-label="Permalink to &quot;JavaScript语言特性的发展历程&quot;">​</a></h3><p>JavaScript语言过去几年间经历了快速发展：</p><ul><li><strong>历史发展</strong>：过去JavaScript每几年发布一个新版本（ES1, ES3, ES5, ES6）</li><li><strong>现代节奏</strong>：从2015年开始，JavaScript采用年度发布周期，每年发布一个新版本（ES2015, ES2016等）</li><li><strong>特性支持</strong>：一些JavaScript特性在TypeScript中得到了提前支持，甚至在正式进入JavaScript标准之前</li></ul><p>我们将这些提前支持的特性称为&quot;ESNext&quot;（即下一个版本的意思）。</p><h3 id="tsc可以转译的特性-表12-2" tabindex="-1">TSC可以转译的特性（表12-2） <a class="header-anchor" href="#tsc可以转译的特性-表12-2" aria-label="Permalink to &quot;TSC可以转译的特性（表12-2）&quot;">​</a></h3><p>TypeScript编译器可以将以下现代JavaScript特性转译为旧版本兼容的代码：</p><table tabindex="0"><thead><tr><th>版本</th><th>特性</th></tr></thead><tbody><tr><td><strong>ES2015</strong></td><td><code>const</code>、<code>let</code>、<code>for...of</code>循环、数组/对象展开语法（<code>...</code>）、标签模板字符串、类、生成器、箭头函数、函数默认参数、函数剩余参数、解构赋值/参数</td></tr><tr><td><strong>ES2016</strong></td><td>幂运算符（<code>**</code>）</td></tr><tr><td><strong>ES2017</strong></td><td><code>async</code>函数、等待Promise</td></tr><tr><td><strong>ES2018</strong></td><td><code>async</code>迭代器</td></tr><tr><td><strong>ES2019</strong></td><td><code>catch</code>子句中的可选参数</td></tr><tr><td><strong>ESNext</strong></td><td>数字分隔符（<code>123_456</code>）</td></tr></tbody></table><h3 id="tsc不能转译的特性-表12-3" tabindex="-1">TSC不能转译的特性（表12-3） <a class="header-anchor" href="#tsc不能转译的特性-表12-3" aria-label="Permalink to &quot;TSC不能转译的特性（表12-3）&quot;">​</a></h3><p>有些JavaScript特性TSC无法转译，这些通常需要polyfill或运行时支持：</p><table tabindex="0"><thead><tr><th>版本</th><th>特性</th></tr></thead><tbody><tr><td><strong>ES5</strong></td><td>Object getters/setters</td></tr><tr><td><strong>ES2015</strong></td><td>Regex的<code>y</code>和<code>u</code>标志</td></tr><tr><td><strong>ES2018</strong></td><td>Regex的<code>s</code>标志</td></tr><tr><td><strong>ESNext</strong></td><td>BigInt（<code>123n</code>）</td></tr></tbody></table><h3 id="编译目标配置详解" tabindex="-1">编译目标配置详解 <a class="header-anchor" href="#编译目标配置详解" aria-label="Permalink to &quot;编译目标配置详解&quot;">​</a></h3><p>在<code>tsconfig.json</code>中设置编译目标：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es5&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 设置编译目标</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="可用的目标选项" tabindex="-1">可用的目标选项： <a class="header-anchor" href="#可用的目标选项" aria-label="Permalink to &quot;可用的目标选项：&quot;">​</a></h4><ul><li><strong><code>es3</code></strong>：用于ECMAScript 3（极少使用）</li><li><strong><code>es5</code></strong>：用于ECMAScript 5（如果不确定用什么，这是个好的默认选择）</li><li><strong><code>es6</code>或<code>es2015</code></strong>：用于ECMAScript 2015</li><li><strong><code>es2016</code></strong>：用于ECMAScript 2016</li><li><strong><code>es2017</code></strong>：用于ECMAScript 2017</li><li><strong><code>es2018</code></strong>：用于ECMAScript 2018</li><li><strong><code>esnext</code></strong>：用于最新的ECMAScript版本</li></ul><h4 id="实际配置示例" tabindex="-1">实际配置示例： <a class="header-anchor" href="#实际配置示例" aria-label="Permalink to &quot;实际配置示例：&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es5&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="lib配置-类型支持与polyfill" tabindex="-1">lib配置：类型支持与polyfill <a class="header-anchor" href="#lib配置-类型支持与polyfill" aria-label="Permalink to &quot;lib配置：类型支持与polyfill&quot;">​</a></h2><h3 id="什么是lib配置" tabindex="-1">什么是lib配置？ <a class="header-anchor" href="#什么是lib配置" aria-label="Permalink to &quot;什么是lib配置？&quot;">​</a></h3><p><code>lib</code>配置解决了一个重要问题：虽然TSC可以将大多数语言特性转译到旧版本（如<code>let</code>转换为<code>var</code>，<code>class</code>转换为<code>function</code>），但你仍然需要为目标环境不支持的新库特性提供polyfill。</p><h3 id="转译与polyfill的区别" tabindex="-1">转译与Polyfill的区别 <a class="header-anchor" href="#转译与polyfill的区别" aria-label="Permalink to &quot;转译与Polyfill的区别&quot;">​</a></h3><ul><li><strong>转译（Transpile）</strong>：语法转换，如箭头函数转换为普通函数</li><li><strong>Polyfill</strong>：功能填充，为旧环境提供新的API实现</li></ul><h4 id="需要polyfill的典型例子" tabindex="-1">需要Polyfill的典型例子： <a class="header-anchor" href="#需要polyfill的典型例子" aria-label="Permalink to &quot;需要Polyfill的典型例子：&quot;">​</a></h4><p>一些特性需要你自己提供polyfill：</p><ul><li><strong><code>Promise</code>和<code>Reflect</code></strong>：ES2015引入的新API</li><li><strong>数据结构</strong>：<code>Map</code>、<code>Set</code>、<code>Symbol</code>等</li><li><strong>浏览器API</strong>：当目标是最新的Chrome、Firefox或Node.js时</li></ul><h3 id="lib配置的作用" tabindex="-1">lib配置的作用 <a class="header-anchor" href="#lib配置的作用" aria-label="Permalink to &quot;lib配置的作用&quot;">​</a></h3><p><code>lib</code>配置告诉TypeScript你的运行环境支持哪些库特性，从而：</p><ol><li><strong>提供正确的类型定义</strong></li><li><strong>避免类型错误</strong></li><li><strong>指导你何时需要polyfill</strong></li></ol><h3 id="lib配置示例" tabindex="-1">lib配置示例 <a class="header-anchor" href="#lib配置示例" aria-label="Permalink to &quot;lib配置示例&quot;">​</a></h3><h4 id="基础配置" tabindex="-1">基础配置： <a class="header-anchor" href="#基础配置" aria-label="Permalink to &quot;基础配置：&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;lib&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2015&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dom&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>这个配置的含义：</p><ul><li><strong>编译目标</strong>：生成ES5兼容的JavaScript代码</li><li><strong>类型支持</strong>：支持ES2015的类型定义和DOM API类型</li><li><strong>你的责任</strong>：为ES2015特性（如Promise、Map等）提供polyfill</li></ul><h4 id="常见的lib组合" tabindex="-1">常见的lib组合： <a class="header-anchor" href="#常见的lib组合" aria-label="Permalink to &quot;常见的lib组合：&quot;">​</a></h4><p><strong>1. 现代浏览器应用：</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2017&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;lib&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2018&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dom&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dom.iterable&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>2. Node.js应用：</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2018&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;lib&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2019&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>3. 兼容性优先的库：</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;lib&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2015.promise&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 只包含Promise类型</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="实际应用策略" tabindex="-1">实际应用策略 <a class="header-anchor" href="#实际应用策略" aria-label="Permalink to &quot;实际应用策略&quot;">​</a></h3><ol><li><strong>了解目标环境</strong>：确定你的代码将在哪些环境中运行</li><li><strong>选择保守的target</strong>：确保代码语法兼容</li><li><strong>选择合适的lib</strong>：获得正确的类型支持</li><li><strong>准备polyfill</strong>：为lib中包含但target不支持的特性提供polyfill</li><li><strong>测试验证</strong>：在目标环境中测试你的应用</li></ol><p>通过合理配置<code>target</code>和<code>lib</code>，你可以充分利用TypeScript的类型安全，同时确保代码在目标环境中正确运行。</p><h2 id="polyfill的实际应用" tabindex="-1">Polyfill的实际应用 <a class="header-anchor" href="#polyfill的实际应用" aria-label="Permalink to &quot;Polyfill的实际应用&quot;">​</a></h2><h3 id="何时需要polyfill" tabindex="-1">何时需要Polyfill？ <a class="header-anchor" href="#何时需要polyfill" aria-label="Permalink to &quot;何时需要Polyfill？&quot;">​</a></h3><p>当你在代码中使用了目标环境不支持的JavaScript特性时，就需要polyfill。以下是一些常见场景：</p><h4 id="_1-针对旧浏览器的polyfill需求" tabindex="-1">1. 针对旧浏览器的Polyfill需求 <a class="header-anchor" href="#_1-针对旧浏览器的polyfill需求" aria-label="Permalink to &quot;1. 针对旧浏览器的Polyfill需求&quot;">​</a></h4><p>如果你要支持旧版本浏览器，通常不需要太多polyfill，但如果你的目标是几个版本前的浏览器，就可能需要polyfill来支持一些现代特性。</p><h4 id="_2-通过babel添加polyfill" tabindex="-1">2. 通过Babel添加Polyfill <a class="header-anchor" href="#_2-通过babel添加polyfill" aria-label="Permalink to &quot;2. 通过Babel添加Polyfill&quot;">​</a></h4><p>你可以通过包管理器安装polyfill，然后通过Babel的<code>@babel/polyfill</code>将其自动添加到TypeScript代码中。</p><p><strong>示例配置：</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;lib&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2015&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dom&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>这种配置下，你告诉TypeScript环境支持ES2015特性（获得类型检查），但实际编译到ES5（语法兼容），然后通过Babel添加ES2015特性的polyfill。</p><h3 id="polyfill应用建议" tabindex="-1">Polyfill应用建议 <a class="header-anchor" href="#polyfill应用建议" aria-label="Permalink to &quot;Polyfill应用建议&quot;">​</a></h3><ol><li><strong>谨慎评估</strong>：不要盲目添加所有polyfill，因为它们会增加bundle大小</li><li><strong>按需加载</strong>：只为你实际使用的特性添加polyfill</li><li><strong>工具辅助</strong>：使用现代构建工具自动分析和添加必要的polyfill</li><li><strong>测试验证</strong>：在目标环境中测试polyfill的效果</li></ol><h2 id="启用source-maps" tabindex="-1">启用Source Maps <a class="header-anchor" href="#启用source-maps" aria-label="Permalink to &quot;启用Source Maps&quot;">​</a></h2><h3 id="什么是source-maps" tabindex="-1">什么是Source Maps？ <a class="header-anchor" href="#什么是source-maps" aria-label="Permalink to &quot;什么是Source Maps？&quot;">​</a></h3><p>Source Maps是一种映射文件，它将编译后的JavaScript代码映射回原始的TypeScript源代码。这对调试非常重要，特别是在以下场景中：</p><h4 id="source-maps的价值" tabindex="-1">Source Maps的价值： <a class="header-anchor" href="#source-maps的价值" aria-label="Permalink to &quot;Source Maps的价值：&quot;">​</a></h4><ol><li><strong>调试体验</strong>：在浏览器开发者工具中可以直接调试TypeScript源码</li><li><strong>错误定位</strong>：错误堆栈显示原始TypeScript文件的行号，而不是编译后的JavaScript</li><li><strong>开发效率</strong>：无需在编译后的代码和源码之间切换思考</li></ol><h3 id="启用source-maps的配置" tabindex="-1">启用Source Maps的配置 <a class="header-anchor" href="#启用source-maps的配置" aria-label="Permalink to &quot;启用Source Maps的配置&quot;">​</a></h3><p>在<code>tsconfig.json</code>中启用：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;sourceMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="source-maps在不同环境中的应用" tabindex="-1">Source Maps在不同环境中的应用 <a class="header-anchor" href="#source-maps在不同环境中的应用" aria-label="Permalink to &quot;Source Maps在不同环境中的应用&quot;">​</a></h3><h4 id="_1-浏览器环境" tabindex="-1">1. 浏览器环境 <a class="header-anchor" href="#_1-浏览器环境" aria-label="Permalink to &quot;1. 浏览器环境&quot;">​</a></h4><p>大多数现代开发工具（如Chrome DevTools）、错误报告和日志框架，以及构建工具都知道如何使用source map。这意味着：</p><ul><li><strong>调试时</strong>：可以在TypeScript源码中设置断点</li><li><strong>错误报告</strong>：错误信息指向原始TypeScript文件</li><li><strong>性能分析</strong>：可以分析TypeScript代码的性能</li></ul><h4 id="_2-服务器环境" tabindex="-1">2. 服务器环境 <a class="header-anchor" href="#_2-服务器环境" aria-label="Permalink to &quot;2. 服务器环境&quot;">​</a></h4><p>在浏览器和服务器环境中都有很多安全级别的保障。不过有一点需要注意：如果你依赖某种安全级别的模糊化来保护你的代码，不要在生产环境中启用source map。</p><h3 id="source-maps的生产环境考虑" tabindex="-1">Source Maps的生产环境考虑 <a class="header-anchor" href="#source-maps的生产环境考虑" aria-label="Permalink to &quot;Source Maps的生产环境考虑&quot;">​</a></h3><p><strong>安全提示</strong>：</p><ul><li><strong>开发环境</strong>：始终启用source maps以获得最佳调试体验</li><li><strong>生产环境</strong>：根据安全需求决定是否启用 <ul><li>如果代码包含敏感逻辑，建议禁用source maps</li><li>如果需要生产环境调试，可以选择性启用</li></ul></li></ul><p><strong>配置示例：</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;sourceMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 开发环境</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;sourceMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       // 生产环境（根据需要调整）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="项目引用-project-references" tabindex="-1">项目引用（Project References） <a class="header-anchor" href="#项目引用-project-references" aria-label="Permalink to &quot;项目引用（Project References）&quot;">​</a></h2><h3 id="什么是项目引用" tabindex="-1">什么是项目引用？ <a class="header-anchor" href="#什么是项目引用" aria-label="Permalink to &quot;什么是项目引用？&quot;">​</a></h3><p>随着应用增长，TypeScript程序会变得越来越庞大，TSC进行类型检查和编译的时间也会越来越长。当开发一个大型项目时，你可能会遇到编译性能问题。</p><p>项目引用是TypeScript提供的一个特性，用于：</p><ol><li><strong>提高编译性能</strong>：通过增量编译减少编译时间</li><li><strong>模块化组织</strong>：将大型项目拆分为多个子项目</li><li><strong>依赖管理</strong>：明确定义项目间的依赖关系</li></ol><h3 id="项目引用的工作原理" tabindex="-1">项目引用的工作原理 <a class="header-anchor" href="#项目引用的工作原理" aria-label="Permalink to &quot;项目引用的工作原理&quot;">​</a></h3><p>项目引用通过以下方式加速编译：</p><ul><li><strong>增量编译</strong>：只重新编译发生变化的部分</li><li><strong>并行编译</strong>：可以并行编译独立的子项目</li><li><strong>智能缓存</strong>：TSC缓存编译结果，避免重复工作</li></ul><h3 id="设置项目引用" tabindex="-1">设置项目引用 <a class="header-anchor" href="#设置项目引用" aria-label="Permalink to &quot;设置项目引用&quot;">​</a></h3><h4 id="_1-拆分typescript项目为多个子项目" tabindex="-1">1. 拆分TypeScript项目为多个子项目 <a class="header-anchor" href="#_1-拆分typescript项目为多个子项目" aria-label="Permalink to &quot;1. 拆分TypeScript项目为多个子项目&quot;">​</a></h4><p>将一个大型项目按功能模块拆分：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>my-large-project/</span></span>
<span class="line"><span>├── packages/</span></span>
<span class="line"><span>│   ├── core/</span></span>
<span class="line"><span>│   │   ├── src/</span></span>
<span class="line"><span>│   │   └── tsconfig.json</span></span>
<span class="line"><span>│   ├── ui/</span></span>
<span class="line"><span>│   │   ├── src/</span></span>
<span class="line"><span>│   │   └── tsconfig.json</span></span>
<span class="line"><span>│   └── utils/</span></span>
<span class="line"><span>│       ├── src/</span></span>
<span class="line"><span>│       └── tsconfig.json</span></span>
<span class="line"><span>└── tsconfig.json  // 根配置文件</span></span></code></pre></div><h4 id="_2-在每个子项目创建tsconfig-json" tabindex="-1">2. 在每个子项目创建tsconfig.json <a class="header-anchor" href="#_2-在每个子项目创建tsconfig-json" aria-label="Permalink to &quot;2. 在每个子项目创建tsconfig.json&quot;">​</a></h4><p>每个子项目都有自己的配置：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;composite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 启用项目引用支持</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;declaration&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 生成声明文件</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;declarationMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 生成声明映射</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;rootDir&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;outDir&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dist&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;include&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src/**/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>关键配置说明：</strong></p><ul><li><strong><code>composite: true</code></strong>：标记这是一个可被引用的项目</li><li><strong><code>declaration: true</code></strong>：必须生成类型声明文件</li><li><strong><code>declarationMap: true</code></strong>：生成声明映射文件以支持跳转到源码</li></ul><h4 id="_3-使用tsc-help查看完整选项" tabindex="-1">3. 使用tsc --help查看完整选项 <a class="header-anchor" href="#_3-使用tsc-help查看完整选项" aria-label="Permalink to &quot;3. 使用tsc --help查看完整选项&quot;">​</a></h4><p>可以通过以下命令查看TSC支持的所有lib选项：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tsc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --help</span></span></code></pre></div><p>这会显示所有可用的编译选项和lib配置选项。</p><h3 id="项目引用的优势" tabindex="-1">项目引用的优势 <a class="header-anchor" href="#项目引用的优势" aria-label="Permalink to &quot;项目引用的优势&quot;">​</a></h3><ol><li><strong>性能提升</strong>：大型项目的编译时间显著减少</li><li><strong>模块清晰</strong>：强制项目结构的模块化</li><li><strong>并行开发</strong>：团队可以并行开发不同的子项目</li><li><strong>依赖明确</strong>：项目间的依赖关系一目了然</li><li><strong>增量构建</strong>：只编译变化的部分，节省时间</li></ol><h3 id="实际应用场景" tabindex="-1">实际应用场景 <a class="header-anchor" href="#实际应用场景" aria-label="Permalink to &quot;实际应用场景&quot;">​</a></h3><p>项目引用特别适用于：</p><ul><li><strong>大型企业应用</strong>：包含多个功能模块的复杂应用</li><li><strong>Monorepo架构</strong>：多个相关包在同一个仓库中</li><li><strong>库开发</strong>：核心库+工具库+UI库的组合</li><li><strong>微前端项目</strong>：多个独立的前端应用共享代码</li></ul><p>通过合理使用项目引用，可以显著改善大型TypeScript项目的开发体验和编译性能。</p><h3 id="项目引用的详细配置" tabindex="-1">项目引用的详细配置 <a class="header-anchor" href="#项目引用的详细配置" aria-label="Permalink to &quot;项目引用的详细配置&quot;">​</a></h3><h4 id="根项目的tsconfig-json配置" tabindex="-1">根项目的tsconfig.json配置 <a class="header-anchor" href="#根项目的tsconfig-json配置" aria-label="Permalink to &quot;根项目的tsconfig.json配置&quot;">​</a></h4><p>在根目录创建一个引用其他子项目的配置文件：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;include&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;references&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./packages/core&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./packages/ui&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./packages/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>关键配置解释：</strong></p><ul><li><strong><code>composite</code></strong>：告诉TSC这个文件夹是一个更大的TypeScript项目的子项目</li><li><strong><code>declaration</code></strong>：TSC需要为这个项目生成<code>.d.ts</code>声明文件，项目引用需要在TypeScript代码之间而非生成的JavaScript之间建立边界。这为TSC在生成类型信息时创建了一个边界，生成的JavaScript代码不包含源码信息（TypeScript类型），这就是为什么TypeScript需要在项目边界生成声明文件</li><li><strong><code>references</code></strong>：这是一个子项目数组，你的项目依赖于这些子项目。每个引用的<code>path</code>应该指向一个包含<code>tsconfig.json</code>的文件夹，或直接指向一个TSC配置文件（如果你没有使用默认的文件名<code>tsconfig.json</code>）</li><li><strong><code>rootDir</code></strong>：明确指定这个子项目应该从哪个文件夹编译相对于根项目的输出</li></ul><h4 id="子项目引用其他子项目" tabindex="-1">子项目引用其他子项目 <a class="header-anchor" href="#子项目引用其他子项目" aria-label="Permalink to &quot;子项目引用其他子项目&quot;">​</a></h4><p>如果一个子项目需要引用另一个子项目，在其<code>tsconfig.json</code>中添加：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;composite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;declaration&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;declarationMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;rootDir&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;outDir&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dist&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;references&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;../core&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;../utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;include&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src/**/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="使用项目引用进行构建" tabindex="-1">使用项目引用进行构建 <a class="header-anchor" href="#使用项目引用进行构建" aria-label="Permalink to &quot;使用项目引用进行构建&quot;">​</a></h3><h4 id="构建命令" tabindex="-1">构建命令 <a class="header-anchor" href="#构建命令" aria-label="Permalink to &quot;构建命令&quot;">​</a></h4><p>当你编译项目时，使用TSC的<code>--build</code>标志来告诉TSC考虑项目引用：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tsc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --build</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tests</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> e2e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> foo_app</span></span></code></pre></div><p><strong>构建选项详解：</strong></p><ul><li><strong>增量编译</strong>：TSC会检查哪些子项目发生了变化，只重新编译必要的部分</li><li><strong>依赖顺序</strong>：TSC会按照正确的依赖顺序编译项目</li><li><strong>并行构建</strong>：独立的子项目可以并行编译</li></ul><h4 id="项目引用的注意事项和警告" tabindex="-1">项目引用的注意事项和警告 <a class="header-anchor" href="#项目引用的注意事项和警告" aria-label="Permalink to &quot;项目引用的注意事项和警告&quot;">​</a></h4><p><strong>⚠️ 重要警告</strong>： 项目引用是一个相对较新的TypeScript特性，在使用时需要谨慎：</p><ol><li><strong>功能完善度</strong>：在编写本书时，项目引用仍在不断完善中，某些功能可能存在粗糙边缘</li><li><strong>工具支持</strong>：使用时需要小心谨慎，特别是与其他构建工具集成时</li><li><strong>增量编译</strong>：绝对检查你生成的<code>.d.ts</code>文件，防止TSC与项目引用的重新编译过程中出现任何遗漏或过时的<code>.d.ts</code>文件。这些过时的声明可能导致类型错误</li><li><strong>清理过程</strong>：时常检查并清理过时的编译产物，确保类型声明与源码保持同步</li></ol><h4 id="最佳实践建议" tabindex="-1">最佳实践建议 <a class="header-anchor" href="#最佳实践建议" aria-label="Permalink to &quot;最佳实践建议&quot;">​</a></h4><ol><li><strong>从小开始</strong>：先在小项目中试验项目引用，熟悉其工作方式</li><li><strong>监控构建</strong>：密切关注编译过程，确保增量编译按预期工作</li><li><strong>定期清理</strong>：定期删除<code>dist</code>文件夹和<code>.d.ts</code>文件，进行完整重新编译</li><li><strong>版本跟踪</strong>：跟踪TypeScript版本更新，项目引用功能在持续改进中</li><li><strong>备用方案</strong>：为关键项目准备传统编译方式作为备用方案</li></ol><h3 id="项目引用的实际收益" tabindex="-1">项目引用的实际收益 <a class="header-anchor" href="#项目引用的实际收益" aria-label="Permalink to &quot;项目引用的实际收益&quot;">​</a></h3><h4 id="性能提升示例" tabindex="-1">性能提升示例 <a class="header-anchor" href="#性能提升示例" aria-label="Permalink to &quot;性能提升示例&quot;">​</a></h4><p>对于大型项目，项目引用可以带来显著的性能提升：</p><ul><li><strong>初次编译</strong>：可能与传统方式相当</li><li><strong>增量编译</strong>：通常可以减少70-90%的编译时间</li><li><strong>并行编译</strong>：在多核机器上可以进一步提升性能</li></ul><h4 id="开发体验改善" tabindex="-1">开发体验改善 <a class="header-anchor" href="#开发体验改善" aria-label="Permalink to &quot;开发体验改善&quot;">​</a></h4><ol><li><strong>更快的反馈循环</strong>：代码修改后更快看到结果</li><li><strong>独立开发</strong>：团队成员可以独立开发不同模块</li><li><strong>清晰的架构</strong>：强制模块化的项目结构</li><li><strong>类型安全</strong>：保持跨项目的类型检查</li></ol><h3 id="何时使用项目引用" tabindex="-1">何时使用项目引用 <a class="header-anchor" href="#何时使用项目引用" aria-label="Permalink to &quot;何时使用项目引用&quot;">​</a></h3><p><strong>适合使用的场景：</strong></p><ul><li>项目编译时间超过30秒</li><li>多个相关但独立的模块</li><li>团队协作开发大型应用</li><li>Monorepo架构的项目</li></ul><p><strong>不适合使用的场景：</strong></p><ul><li>小型项目（编译时间很短）</li><li>高度耦合的代码结构</li><li>需要频繁跨模块重构的项目</li><li>对构建稳定性要求极高的生产环境</li></ul><p>通过谨慎使用项目引用，可以在合适的场景下显著提升大型TypeScript项目的开发效率和编译性能。</p><h2 id="使用extends减少tsconfig-json样板代码" tabindex="-1">使用extends减少tsconfig.json样板代码 <a class="header-anchor" href="#使用extends减少tsconfig-json样板代码" aria-label="Permalink to &quot;使用extends减少tsconfig.json样板代码&quot;">​</a></h2><h3 id="为什么需要extends" tabindex="-1">为什么需要extends？ <a class="header-anchor" href="#为什么需要extends" aria-label="Permalink to &quot;为什么需要extends？&quot;">​</a></h3><p>由于你可能有多个子项目需要共享相同的TSC配置选项，TypeScript提供了一个方便的方式来创建&quot;基础&quot;tsconfig.json文件，其他子项目可以继承这个基础配置。</p><h3 id="基础配置文件的创建" tabindex="-1">基础配置文件的创建 <a class="header-anchor" href="#基础配置文件的创建" aria-label="Permalink to &quot;基础配置文件的创建&quot;">​</a></h3><p>创建一个基础配置文件（例如<code>tsconfig.base.json</code>）：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;composite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;declaration&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;declarationMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;commonjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2015&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;lib&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2015&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dom&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2017.array.include&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;sourceMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;strict&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;esModuleInterop&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;skipLibCheck&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;forceConsistentCasingInFileNames&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="子项目继承基础配置" tabindex="-1">子项目继承基础配置 <a class="header-anchor" href="#子项目继承基础配置" aria-label="Permalink to &quot;子项目继承基础配置&quot;">​</a></h3><p>在子项目中使用<code>extends</code>来继承基础配置：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;extends&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;../tsconfig.base&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;include&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;**/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;references&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./packages/core&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./packages/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="extends的优势" tabindex="-1">extends的优势 <a class="header-anchor" href="#extends的优势" aria-label="Permalink to &quot;extends的优势&quot;">​</a></h3><ol><li><strong>减少重复</strong>：避免在每个子项目中重复相同的配置</li><li><strong>统一管理</strong>：在一个地方管理通用的编译选项</li><li><strong>易于维护</strong>：修改基础配置会自动影响所有继承的子项目</li><li><strong>灵活覆盖</strong>：子项目可以覆盖基础配置中的特定选项</li></ol><h2 id="在服务器上运行typescript" tabindex="-1">在服务器上运行TypeScript <a class="header-anchor" href="#在服务器上运行typescript" aria-label="Permalink to &quot;在服务器上运行TypeScript&quot;">​</a></h2><h3 id="编译配置" tabindex="-1">编译配置 <a class="header-anchor" href="#编译配置" aria-label="Permalink to &quot;编译配置&quot;">​</a></h3><p>要在Node.js环境中运行TypeScript代码，需要将代码编译为ES2015或ES5的JavaScript（如果你的目标是旧版Node.js），并且将模块标志设置为<code>commonjs</code>：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2015&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;commonjs&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>这将编译你的ES2015 <code>import</code>和<code>export</code>调用为<code>require</code>和<code>module.exports</code>，这样你的代码就能在Node.js中进一步运行。</p><h3 id="node-js环境的特殊考虑" tabindex="-1">Node.js环境的特殊考虑 <a class="header-anchor" href="#node-js环境的特殊考虑" aria-label="Permalink to &quot;Node.js环境的特殊考虑&quot;">​</a></h3><ul><li><strong>模块系统</strong>：Node.js使用CommonJS模块系统，所以需要将ES模块转换</li><li><strong>目标版本</strong>：根据你的Node.js版本选择合适的编译目标</li><li><strong>依赖管理</strong>：确保所有依赖都能在Node.js环境中正确工作</li></ul><h2 id="在浏览器中运行typescript" tabindex="-1">在浏览器中运行TypeScript <a class="header-anchor" href="#在浏览器中运行typescript" aria-label="Permalink to &quot;在浏览器中运行TypeScript&quot;">​</a></h2><h3 id="浏览器运行的复杂性" tabindex="-1">浏览器运行的复杂性 <a class="header-anchor" href="#浏览器运行的复杂性" aria-label="Permalink to &quot;浏览器运行的复杂性&quot;">​</a></h3><p>在浏览器中编译TypeScript运行比在服务器上运行涉及的工作更多。</p><h3 id="选择模块系统" tabindex="-1">选择模块系统 <a class="header-anchor" href="#选择模块系统" aria-label="Permalink to &quot;选择模块系统&quot;">​</a></h3><p>首先，选择一个模块系统来编译。一个好的经验法则是坚持选用时发布的库：为了获得最大兼容性，可以选择多种发布格式。</p><h4 id="推荐的发布策略" tabindex="-1">推荐的发布策略： <a class="header-anchor" href="#推荐的发布策略" aria-label="Permalink to &quot;推荐的发布策略：&quot;">​</a></h4><ol><li><p><strong>如果你只计划在代码中使用自己而没有发布给他人使用</strong>：选择任何你喜欢的模块格式。检查你的bundler文档——例如，Webpack和Rollup都可以处理ES2015模块，而Browserify则擅长处理CommonJS模块。以下是一些指导：</p><ul><li><strong>使用SystemJS模块加载器</strong>：设置module为<code>system</code></li><li><strong>使用现代module bundler（如Webpack或Rollup）</strong>：设置module为<code>es2015</code></li><li><strong>使用ES2015感知的模块处理器并且你的代码使用动态导入</strong>：设置module为<code>esnext</code></li></ul></li><li><p><strong>模块处理器的选择建议</strong>：</p><ul><li><strong>如果使用Webpack或Rollup</strong>：设置module为<code>es2015</code></li><li><strong>如果使用ES2015感知的模块处理器</strong>：设置module为<code>esnext</code>（用于Dynamic Import）</li></ul></li></ol><h3 id="错误监控" tabindex="-1">错误监控 <a class="header-anchor" href="#错误监控" aria-label="Permalink to &quot;错误监控&quot;">​</a></h3><h4 id="编译时错误处理" tabindex="-1">编译时错误处理 <a class="header-anchor" href="#编译时错误处理" aria-label="Permalink to &quot;编译时错误处理&quot;">​</a></h4><p>当你的源码有错误时，除了需要在编译时监控错误外，你还需要一种方法来了解运行时错误的情况。可以尝试在编译时防止它们（至少是bug导致运行时错误的类型），使用一个错误监控工具，如Sentry或Bugsnag来报告和整理你的运行时异常。</p><h4 id="错误监控的重要性" tabindex="-1">错误监控的重要性 <a class="header-anchor" href="#错误监控的重要性" aria-label="Permalink to &quot;错误监控的重要性&quot;">​</a></h4><ol><li><strong>编译时错误</strong>：TypeScript帮助捕获类型相关的错误</li><li><strong>运行时错误</strong>：需要专门的工具来监控和报告</li><li><strong>生产环境监控</strong>：使用Sentry、Bugsnag等工具跟踪实际用户遇到的问题</li></ol><h3 id="浏览器环境的特殊配置" tabindex="-1">浏览器环境的特殊配置 <a class="header-anchor" href="#浏览器环境的特殊配置" aria-label="Permalink to &quot;浏览器环境的特殊配置&quot;">​</a></h3><h4 id="source-maps的重要性" tabindex="-1">Source Maps的重要性 <a class="header-anchor" href="#source-maps的重要性" aria-label="Permalink to &quot;Source Maps的重要性&quot;">​</a></h4><p>如果你使用源码映射（推荐这样做），你需要将源码映射加载到你的Node.js监控中。但首先检查源码映射包或者工具的设置说明。大多数进程监控、日志和错误报告工具（如PM2、Winston和Sentry）都内置了对源码映射的支持。</p><h4 id="不同模块加载器的配置" tabindex="-1">不同模块加载器的配置 <a class="header-anchor" href="#不同模块加载器的配置" aria-label="Permalink to &quot;不同模块加载器的配置&quot;">​</a></h4><p><strong>SystemJS配置示例：</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;system&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>现代bundler配置示例：</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2015&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2015&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>支持动态导入的配置：</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es2018&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;esnext&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="浏览器运行的最佳实践" tabindex="-1">浏览器运行的最佳实践 <a class="header-anchor" href="#浏览器运行的最佳实践" aria-label="Permalink to &quot;浏览器运行的最佳实践&quot;">​</a></h3><ol><li><strong>选择合适的模块系统</strong>：根据你的bundler选择最佳的模块格式</li><li><strong>启用Source Maps</strong>：便于调试和错误追踪</li><li><strong>配置错误监控</strong>：使用专业工具监控生产环境问题</li><li><strong>测试兼容性</strong>：在目标浏览器中测试你的应用</li><li><strong>考虑polyfill</strong>：为旧浏览器提供必要的功能填充</li></ol><p>通过合理配置这些选项，你可以确保TypeScript代码在浏览器环境中稳定、高效地运行。</p><h2 id="浏览器运行的高级策略" tabindex="-1">浏览器运行的高级策略 <a class="header-anchor" href="#浏览器运行的高级策略" aria-label="Permalink to &quot;浏览器运行的高级策略&quot;">​</a></h2><h3 id="构建策略的差异化选择" tabindex="-1">构建策略的差异化选择 <a class="header-anchor" href="#构建策略的差异化选择" aria-label="Permalink to &quot;构建策略的差异化选择&quot;">​</a></h3><p>针对不同的项目需求，你应该采用不同的构建策略：</p><h4 id="_1-如果你构建的是供其他项目使用的库" tabindex="-1">1. 如果你构建的是供其他项目使用的库 <a class="header-anchor" href="#_1-如果你构建的是供其他项目使用的库" aria-label="Permalink to &quot;1. 如果你构建的是供其他项目使用的库&quot;">​</a></h4><ul><li><strong>不要在你的代码中运行模块打包器</strong>：让使用者自己处理打包</li><li><strong>设置<code>module</code>为<code>none</code></strong>：避免与使用者的构建工具冲突</li><li><strong>不要包含polyfill</strong>：让使用者决定是否需要兼容性支持</li></ul><h4 id="_2-如果你正在构建前端应用" tabindex="-1">2. 如果你正在构建前端应用 <a class="header-anchor" href="#_2-如果你正在构建前端应用" aria-label="Permalink to &quot;2. 如果你正在构建前端应用&quot;">​</a></h4><ul><li><strong>使用动态导入来延迟加载你不需要的代码</strong>：减少初始页面加载时间</li><li><strong>使用代码分离功能</strong>：将代码分割成可管理的块</li><li><strong>利用bundler的自动代码分离</strong>：比如Webpack的自动分离功能</li></ul><h4 id="_3-如果你正在shipping-typescript代码到浏览器" tabindex="-1">3. 如果你正在shipping TypeScript代码到浏览器 <a class="header-anchor" href="#_3-如果你正在shipping-typescript代码到浏览器" aria-label="Permalink to &quot;3. 如果你正在shipping TypeScript代码到浏览器&quot;">​</a></h4><ul><li><strong>制定预加载策略</strong>：决定哪些代码需要立即加载</li><li><strong>实现代码分离</strong>：将不同功能的代码分离到不同的chunk中</li><li><strong>优化加载时间</strong>：使用工具测量和优化bundle大小</li></ul><h3 id="页面加载优化策略" tabindex="-1">页面加载优化策略 <a class="header-anchor" href="#页面加载优化策略" aria-label="Permalink to &quot;页面加载优化策略&quot;">​</a></h3><h4 id="测量页面加载时间" tabindex="-1">测量页面加载时间 <a class="header-anchor" href="#测量页面加载时间" aria-label="Permalink to &quot;测量页面加载时间&quot;">​</a></h4><ul><li><strong>使用New Relic和Pingdom等工具</strong>：监控真实的页面加载性能</li><li><strong>制定预加载策略</strong>：确定哪些代码需要立即加载，哪些可以延迟</li><li><strong>避免加载过多JavaScript代码</strong>：可能导致页面加载缓慢</li></ul><h4 id="代码分离的实现" tabindex="-1">代码分离的实现 <a class="header-anchor" href="#代码分离的实现" aria-label="Permalink to &quot;代码分离的实现&quot;">​</a></h4><ul><li><strong>利用现代bundler</strong>：Webpack等工具提供强大的代码分离功能</li><li><strong>动态导入</strong>：使用<code>import()</code>语法实现运行时加载</li><li><strong>保持合理的bundle大小</strong>：监控并优化每个chunk的大小</li></ul><h3 id="生产构建优化" tabindex="-1">生产构建优化 <a class="header-anchor" href="#生产构建优化" aria-label="Permalink to &quot;生产构建优化&quot;">​</a></h3><h4 id="保持生产构建的精简性" tabindex="-1">保持生产构建的精简性 <a class="header-anchor" href="#保持生产构建的精简性" aria-label="Permalink to &quot;保持生产构建的精简性&quot;">​</a></h4><ul><li><strong>避免包含开发时工具</strong>：确保生产版本不包含调试代码</li><li><strong>优化bundle大小</strong>：移除未使用的代码</li><li><strong>测试polyfill需求</strong>：只包含目标环境确实需要的polyfill</li></ul><h4 id="支持多种发布格式" tabindex="-1">支持多种发布格式 <a class="header-anchor" href="#支持多种发布格式" aria-label="Permalink to &quot;支持多种发布格式&quot;">​</a></h4><p>如果你要发布开源库，建议提供多种模块格式以获得最大兼容性：</p><ul><li><strong>CommonJS格式</strong>：适用于Node.js环境</li><li><strong>ES2015模块格式</strong>：适用于现代bundler</li><li><strong>UMD格式</strong>：适用于直接在浏览器中使用</li></ul><h2 id="发布typescript代码到npm" tabindex="-1">发布TypeScript代码到NPM <a class="header-anchor" href="#发布typescript代码到npm" aria-label="Permalink to &quot;发布TypeScript代码到NPM&quot;">​</a></h2><h3 id="npm发布的核心原则" tabindex="-1">NPM发布的核心原则 <a class="header-anchor" href="#npm发布的核心原则" aria-label="Permalink to &quot;NPM发布的核心原则&quot;">​</a></h3><p>发布TypeScript代码到NPM时，核心是确保其他TypeScript和JavaScript项目都能正常使用你的库。</p><h4 id="关键配置要点" tabindex="-1">关键配置要点： <a class="header-anchor" href="#关键配置要点" aria-label="Permalink to &quot;关键配置要点：&quot;">​</a></h4><ol><li><strong>生成源码映射</strong>：让你的用户在调试时能直接看到你的TypeScript代码</li><li><strong>编译到ES5</strong>：确保最大的浏览器兼容性</li><li><strong>注意模块格式</strong>：确保你编译到的模块格式与目标环境兼容（UMD、CommonJS、ES2015等）</li><li><strong>生成类型声明</strong>：确保TypeScript用户能获得完整的类型支持</li></ol><h3 id="生成类型声明文件的重要性" tabindex="-1">生成类型声明文件的重要性 <a class="header-anchor" href="#生成类型声明文件的重要性" aria-label="Permalink to &quot;生成类型声明文件的重要性&quot;">​</a></h3><p>使用以下配置确保生成完整的类型支持：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;declaration&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 生成.d.ts文件</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;declarationMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 生成声明映射文件</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;sourceMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // 生成源码映射</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>这样配置可以确保：</p><ul><li><strong>TypeScript用户</strong>：获得完整的类型检查和智能提示</li><li><strong>JavaScript用户</strong>：可以正常使用你的库</li><li><strong>调试支持</strong>：开发者可以直接调试到TypeScript源码</li></ul><h3 id="配置示例" tabindex="-1">配置示例 <a class="header-anchor" href="#配置示例" aria-label="Permalink to &quot;配置示例&quot;">​</a></h3><h4 id="适用于npm发布的完整配置" tabindex="-1">适用于NPM发布的完整配置： <a class="header-anchor" href="#适用于npm发布的完整配置" aria-label="Permalink to &quot;适用于NPM发布的完整配置：&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;es5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;commonjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;declaration&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;declarationMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;sourceMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;outDir&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;rootDir&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;strict&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;include&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src/**/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exclude&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_modules&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tests&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>通过合理配置这些选项，你可以确保TypeScript代码在浏览器环境中稳定、高效地运行，并为NPM用户提供优秀的开发体验。</p><h2 id="npm发布的实际配置" tabindex="-1">NPM发布的实际配置 <a class="header-anchor" href="#npm发布的实际配置" aria-label="Permalink to &quot;NPM发布的实际配置&quot;">​</a></h2><h3 id="npmignore配置" tabindex="-1">.npmignore配置 <a class="header-anchor" href="#npmignore配置" aria-label="Permalink to &quot;.npmignore配置&quot;">​</a></h3><p>在发布NPM包时，你需要阻止TypeScript源码被发布到NPM。在你的<code>.npmignore</code>文件中，避免上传package的源码以及在你的<code>.gitignore</code>中排除生成的产物：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># .npmignore示例</span></span>
<span class="line"><span>src/           # 避免上传源码  </span></span>
<span class="line"><span>*.ts           # 排除TypeScript文件</span></span>
<span class="line"><span>!*.d.ts        # 但包含类型声明文件</span></span></code></pre></div><h3 id="package-json的完整配置" tabindex="-1">package.json的完整配置 <a class="header-anchor" href="#package-json的完整配置" aria-label="Permalink to &quot;package.json的完整配置&quot;">​</a></h3><p>以下是一个适用于NPM发布的TypeScript项目的完整<code>package.json</code>配置示例：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my-awesome-typescript-project&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dist/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dist/index.d.ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tsc -p .&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;prepublishOnly&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tsc -p .&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;files&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;dist/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;*.d.ts&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>关键字段说明：</strong></p><ul><li><strong><code>main</code></strong>：指向编译后的JavaScript入口文件</li><li><strong><code>types</code></strong>：指向类型声明文件，让TypeScript用户获得类型支持</li><li><strong><code>files</code></strong>：明确指定发布时包含的文件</li><li><strong><code>prepublishOnly</code></strong>：发布前自动编译，确保最新代码</li></ul><h2 id="triple-slash-directives-三斜杠指令" tabindex="-1">Triple-Slash Directives（三斜杠指令） <a class="header-anchor" href="#triple-slash-directives-三斜杠指令" aria-label="Permalink to &quot;Triple-Slash Directives（三斜杠指令）&quot;">​</a></h2><h3 id="什么是triple-slash-directives" tabindex="-1">什么是Triple-Slash Directives？ <a class="header-anchor" href="#什么是triple-slash-directives" aria-label="Permalink to &quot;什么是Triple-Slash Directives？&quot;">​</a></h3><p>TypeScript提供了一个鲜为人知但非常有用的特性，叫做<strong>triple-slash directives</strong>（三斜杠指令）。这些指令是一些特殊的注释，为TSC编译器提供额外的指示。</p><h3 id="三斜杠指令的语法特点" tabindex="-1">三斜杠指令的语法特点 <a class="header-anchor" href="#三斜杠指令的语法特点" aria-label="Permalink to &quot;三斜杠指令的语法特点&quot;">​</a></h3><p>三斜杠指令有以下特点：</p><ul><li>必须出现在文件的<strong>最顶部</strong></li><li>只能有其他三斜杠指令或注释在它们之前</li><li>如果出现在语句或声明之后，它们会被当作普通注释处理</li></ul><h3 id="主要的三斜杠指令类型" tabindex="-1">主要的三斜杠指令类型 <a class="header-anchor" href="#主要的三斜杠指令类型" aria-label="Permalink to &quot;主要的三斜杠指令类型&quot;">​</a></h3><h4 id="_1-types指令" tabindex="-1">1. types指令 <a class="header-anchor" href="#_1-types指令" aria-label="Permalink to &quot;1. types指令&quot;">​</a></h4><p><code>/// &lt;reference types=&quot;...&quot; /&gt;</code></p><p><strong>作用</strong>：告诉TypeScript编译器当你编译这个模块时，需要包含特定类型包的类型声明。</p><p><strong>使用场景</strong>：</p><ul><li>当你导入一个包但TypeScript检测不到该包的类型时</li><li>需要手动引入类型定义时</li></ul><p><strong>示例</strong>：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/// &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">reference</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> types</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 现在可以使用Node.js的类型</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p><strong>注意事项</strong>：</p><ul><li>只有当导入的包在类型位置被使用时，你才需要这个指令</li><li>如果你在代码中用<code>import</code>导入了某个模块，通常不需要<code>types</code>指令</li></ul><h4 id="_2-用于副作用的imports指令" tabindex="-1">2. 用于副作用的imports指令 <a class="header-anchor" href="#_2-用于副作用的imports指令" aria-label="Permalink to &quot;2. 用于副作用的imports指令&quot;">​</a></h4><p><code>/// &lt;reference types=&quot;...&quot; /&gt;</code>还可以用于引入只有副作用而没有导出内容的类型包。</p><p><strong>典型例子</strong>：一些polyfill类型包，它们只扩展全局类型而不导出任何内容。</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/// &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">reference</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> types</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;some-polyfill-types&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 现在全局类型已经被扩展，可以使用新的API</span></span></code></pre></div><h3 id="triple-slash-directives的实际应用" tabindex="-1">Triple-Slash Directives的实际应用 <a class="header-anchor" href="#triple-slash-directives的实际应用" aria-label="Permalink to &quot;Triple-Slash Directives的实际应用&quot;">​</a></h3><h4 id="何时使用types指令" tabindex="-1">何时使用types指令 <a class="header-anchor" href="#何时使用types指令" aria-label="Permalink to &quot;何时使用types指令&quot;">​</a></h4><p><strong>需要使用的情况：</strong></p><ol><li>引入只提供类型声明的包</li><li>使用全局类型扩展包</li><li>引入Node.js或浏览器环境特定的类型</li></ol><p><strong>不需要使用的情况：</strong></p><ol><li>通过<code>import</code>语句已经导入的模块</li><li>在<code>tsconfig.json</code>中已经配置的类型包</li></ol><h4 id="最佳实践" tabindex="-1">最佳实践 <a class="header-anchor" href="#最佳实践" aria-label="Permalink to &quot;最佳实践&quot;">​</a></h4><ol><li><strong>谨慎使用</strong>：只在确实需要时使用三斜杠指令</li><li><strong>文档说明</strong>：在项目文档中说明为什么需要特定的三斜杠指令</li><li><strong>位置正确</strong>：确保指令出现在文件最顶部</li><li><strong>避免冗余</strong>：不要为已经通过其他方式引入的类型添加指令</li></ol><h3 id="示例-完整的使用场景" tabindex="-1">示例：完整的使用场景 <a class="header-anchor" href="#示例-完整的使用场景" aria-label="Permalink to &quot;示例：完整的使用场景&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/// &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">reference</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> types</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/// &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">reference</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> types</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;jest&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 文件内容</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFileSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Node.js API</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { expect } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@jest/globals&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Jest API</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 现在可以安全地使用这些API而不会出现类型错误</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./config.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(content).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toBeDefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p>通过合理使用Triple-Slash Directives，你可以更精确地控制TypeScript的类型检查行为，确保在复杂的项目环境中获得正确的类型支持。</p><h3 id="更多三斜杠指令类型" tabindex="-1">更多三斜杠指令类型 <a class="header-anchor" href="#更多三斜杠指令类型" aria-label="Permalink to &quot;更多三斜杠指令类型&quot;">​</a></h3><h4 id="_3-amd-module指令" tabindex="-1">3. amd-module指令 <a class="header-anchor" href="#_3-amd-module指令" aria-label="Permalink to &quot;3. amd-module指令&quot;">​</a></h4><p><code>/// &lt;reference types=&quot;...&quot; /&gt;</code>指令在处理全局（ambient）类型声明时特别有用。</p><p><strong>使用场景示例：</strong></p><p>假设你有以下代码，需要导出一个名为<code>logService</code>的服务：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> logService </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 日志实现</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>当你使用TSC编译到AMD模块格式时，会发现<code>.js</code>文件中的<code>import</code>调用没有被包含：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// app.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./global&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 这行import调用可能丢失</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 编译后的JavaScript中import &#39;./global&#39;没有被包含</span></span></code></pre></div><h4 id="解决全局模块导入问题的方法" tabindex="-1">解决全局模块导入问题的方法 <a class="header-anchor" href="#解决全局模块导入问题的方法" aria-label="Permalink to &quot;解决全局模块导入问题的方法&quot;">​</a></h4><p>如果你确实需要处理这种情况，并且想要继续使用完整模块导入（而不是纯副作用导入），有几种方法可以重写你的代码：</p><p><strong>方法1：避免纯副作用导入</strong></p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 不要使用纯副作用导入</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./global&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 这种方式可能有问题</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 相反，使用明确的导入</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { someExport } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./global&#39;</span></span></code></pre></div><p><strong>方法2：使用显式的副作用导入</strong></p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 如果你真的需要副作用导入，使用这种方式</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./global&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 但要确保模块确实有导出，哪怕是空的导出</span></span></code></pre></div><p><strong>方法3：包含环境声明</strong> 如果你想使用类型信息，可以在项目中包含环境声明，并且不用考虑其他导入依赖。</p><h3 id="amd-module指令详解" tabindex="-1">amd-module指令详解 <a class="header-anchor" href="#amd-module指令详解" aria-label="Permalink to &quot;amd-module指令详解&quot;">​</a></h3><h4 id="什么是amd-module指令" tabindex="-1">什么是amd-module指令？ <a class="header-anchor" href="#什么是amd-module指令" aria-label="Permalink to &quot;什么是amd-module指令？&quot;">​</a></h4><p><code>/// &lt;amd-module name=&quot;moduleName&quot; /&gt;</code></p><p><strong>作用</strong>：当编译到AMD模块格式时，给你生成的AMD模块一个名称。</p><p><strong>使用场景</strong>：</p><ul><li>编译到AMD模块格式（<code>{&quot;module&quot;: &quot;amd&quot;}</code>）时</li><li>需要为模块指定特定名称时</li><li>与RequireJS等AMD加载器配合使用时</li></ul><h4 id="amd-module指令的实际应用" tabindex="-1">amd-module指令的实际应用 <a class="header-anchor" href="#amd-module指令的实际应用" aria-label="Permalink to &quot;amd-module指令的实际应用&quot;">​</a></h4><p><strong>示例代码：</strong></p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/// &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">amd-module</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;logService&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> logService </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Logging...&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>编译结果：</strong> 当编译到AMD格式时，TSC会生成以下JavaScript代码：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">define</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;logService&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;require&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.logService </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Logging...&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h4 id="使用注意事项" tabindex="-1">使用注意事项 <a class="header-anchor" href="#使用注意事项" aria-label="Permalink to &quot;使用注意事项&quot;">​</a></h4><ol><li><strong>仅适用于AMD格式</strong>：这个指令只在<code>module</code>设置为<code>amd</code>时有效</li><li><strong>设置名称属性</strong>：使用<code>amd-module</code>指令并设置一个名称属性</li><li><strong>剩余代码保持不变</strong>：除了添加指令，你的其他代码可以保持不变</li></ol><h4 id="与其他模块系统的对比" tabindex="-1">与其他模块系统的对比 <a class="header-anchor" href="#与其他模块系统的对比" aria-label="Permalink to &quot;与其他模块系统的对比&quot;">​</a></h4><p><strong>CommonJS模块：</strong></p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 不使用amd-module指令时的CommonJS输出</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.logService </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Logging...&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p><strong>AMD模块（无名称）：</strong></p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 不使用amd-module指令时的AMD输出</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">define</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;require&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.logService </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Logging...&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>AMD模块（有名称）：</strong></p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 使用amd-module指令后的AMD输出</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">define</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;logService&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;require&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.logService </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Logging...&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="三斜杠指令总结" tabindex="-1">三斜杠指令总结 <a class="header-anchor" href="#三斜杠指令总结" aria-label="Permalink to &quot;三斜杠指令总结&quot;">​</a></h3><h4 id="完整的三斜杠指令类型" tabindex="-1">完整的三斜杠指令类型 <a class="header-anchor" href="#完整的三斜杠指令类型" aria-label="Permalink to &quot;完整的三斜杠指令类型&quot;">​</a></h4><ol><li><strong><code>/// &lt;reference types=&quot;...&quot; /&gt;</code></strong>：引入类型定义</li><li><strong><code>/// &lt;reference path=&quot;...&quot; /&gt;</code></strong>：引入其他TypeScript文件（较少使用）</li><li><strong><code>/// &lt;amd-module name=&quot;...&quot; /&gt;</code></strong>：为AMD模块指定名称</li></ol><h4 id="使用建议" tabindex="-1">使用建议 <a class="header-anchor" href="#使用建议" aria-label="Permalink to &quot;使用建议&quot;">​</a></h4><ol><li><strong>优先使用标准导入</strong>：在大多数情况下，使用标准的<code>import</code>语句</li><li><strong>谨慎使用三斜杠指令</strong>：只在确实需要时使用</li><li><strong>了解编译目标</strong>：根据你的模块编译目标选择合适的指令</li><li><strong>保持一致性</strong>：在项目中保持三斜杠指令使用的一致性</li></ol><p>通过理解这些三斜杠指令，你可以更好地控制TypeScript的编译行为，特别是在处理复杂的模块系统和环境配置时。</p><h3 id="amd模块的实际建议" tabindex="-1">AMD模块的实际建议 <a class="header-anchor" href="#amd模块的实际建议" aria-label="Permalink to &quot;AMD模块的实际建议&quot;">​</a></h3><p>当编译到AMD模块时，使用<code>amd-module</code>指令可以让你的代码更容易打包和调试。不过，如果可以的话，建议切换到更现代的模块格式，如ES2015模块，因为它们：</p><ol><li><strong>更广泛支持</strong>：现代构建工具都优先支持ES2015模块</li><li><strong>更好的工具链</strong>：拥有更完善的工具生态</li><li><strong>标准化</strong>：符合JavaScript官方标准</li><li><strong>性能优势</strong>：支持tree-shaking和更好的优化</li></ol><h2 id="章节总结" tabindex="-1">章节总结 <a class="header-anchor" href="#章节总结" aria-label="Permalink to &quot;章节总结&quot;">​</a></h2><p>本章涵盖了构建和运行TypeScript应用所需的所有核心知识，无论是在浏览器中还是在服务器上的生产环境。我们深入讨论了以下关键主题：</p><h3 id="核心构建概念" tabindex="-1">核心构建概念 <a class="header-anchor" href="#核心构建概念" aria-label="Permalink to &quot;核心构建概念&quot;">​</a></h3><ol><li><strong>编译目标选择</strong>：如何选择合适的JavaScript版本进行编译</li><li><strong>库配置管理</strong>：如何标记环境中可用的库（以及如何为缺失的库提供polyfill）</li><li><strong>Source Maps构建</strong>：如何构建和发布source maps，让应用在生产环境和本地开发中都更容易调试</li></ol><h3 id="项目优化策略" tabindex="-1">项目优化策略 <a class="header-anchor" href="#项目优化策略" aria-label="Permalink to &quot;项目优化策略&quot;">​</a></h3><ol start="4"><li><strong>模块化组织</strong>：如何模块化你的TypeScript项目以保持编译时间的快速</li><li><strong>性能优化</strong>：通过项目引用和增量编译提升大型项目的构建性能</li></ol><h3 id="部署和发布" tabindex="-1">部署和发布 <a class="header-anchor" href="#部署和发布" aria-label="Permalink to &quot;部署和发布&quot;">​</a></h3><ol start="6"><li><strong>服务器运行</strong>：如何在服务器上运行TypeScript应用</li><li><strong>浏览器部署</strong>：如何在浏览器中运行TypeScript应用，包括代码分离和性能优化策略</li><li><strong>NPM发布</strong>：如何将TypeScript代码发布到NPM供他人使用，包括类型声明和兼容性配置</li></ol><h3 id="高级特性" tabindex="-1">高级特性 <a class="header-anchor" href="#高级特性" aria-label="Permalink to &quot;高级特性&quot;">​</a></h3><ol start="9"><li><strong>导入消除机制</strong>：了解TypeScript如何处理导入和导出的优化</li><li><strong>三斜杠指令</strong>：对于AMD用户，如何使用triple-slash指令为模块命名和处理类型引用</li></ol><h3 id="实用技巧" tabindex="-1">实用技巧 <a class="header-anchor" href="#实用技巧" aria-label="Permalink to &quot;实用技巧&quot;">​</a></h3><p><strong>关于Babel插件的补充提示</strong>： 如果你使用了TSC无法转译的语言特性，而你的目标环境又不支持这些特性，通常可以找到相应的Babel插件来转译这些功能。搜索&quot;babel plugin &lt;特性名称&gt;&quot;可以找到最新的插件解决方案。</p><h3 id="本章的实践价值" tabindex="-1">本章的实践价值 <a class="header-anchor" href="#本章的实践价值" aria-label="Permalink to &quot;本章的实践价值&quot;">​</a></h3><p>通过学习本章内容，你现在具备了：</p><ul><li><strong>完整的TypeScript项目构建能力</strong>：从开发到生产的完整工作流</li><li><strong>性能优化技能</strong>：能够处理大型项目的编译性能问题</li><li><strong>多环境部署经验</strong>：能够将TypeScript应用部署到不同的运行环境</li><li><strong>开源发布能力</strong>：能够创建和发布高质量的TypeScript库</li><li><strong>高级配置技巧</strong>：掌握各种编译选项和优化策略</li></ul><p>这些技能将帮助你在实际项目中高效地使用TypeScript，无论是个人项目还是企业级应用开发。</p></div></div></main><footer class="VPDocFooter" data-v-01e6412c data-v-cc477bb9><!--[--><!--]--><div class="edit-info" data-v-cc477bb9><!----><div class="last-updated" data-v-cc477bb9><p class="VPLastUpdated" data-v-cc477bb9 data-v-d64f1bb4>最后更新于: <time datetime="2025-08-18T07:59:36.000Z" data-v-d64f1bb4></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-cc477bb9><span class="visually-hidden" id="doc-footer-aria-label" data-v-cc477bb9>Pager</span><div class="pager" data-v-cc477bb9><a class="VPLink link pager-link prev" href="/typescript-note/programming-typescript/chapter11.html" data-v-cc477bb9><!--[--><span class="desc" data-v-cc477bb9>上一页</span><span class="title" data-v-cc477bb9>第11章：与JavaScript互操作</span><!--]--></a></div><div class="pager" data-v-cc477bb9><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-1af9b1e5 data-v-85889892><div class="container" data-v-85889892><p class="message" data-v-85889892>基于 TypeScript 研究项目</p><p class="copyright" data-v-85889892>Copyright © 2023-present</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"contributing.md\":\"59TS7BeO\",\"examples_index.md\":\"Bx3b7rnU\",\"index.md\":\"CAjDyEWn\",\"memory-bank_activecontext.md\":\"QhT1l9h1\",\"memory-bank_notes.md\":\"nK4HDoVd\",\"memory-bank_productcontext.md\":\"RdSx4Bp0\",\"memory-bank_progress.md\":\"BOvsZLfV\",\"memory-bank_projectbrief.md\":\"C4nQ-uwD\",\"memory-bank_research_programming-typescript-book.md\":\"X4fY5XAF\",\"memory-bank_research_tsconfig-best-practices.md\":\"BNmrmoYJ\",\"memory-bank_research_type-challenges.md\":\"CCfoIcxd\",\"memory-bank_style-guide.md\":\"FexpuRLn\",\"memory-bank_systempatterns.md\":\"B92Epsvh\",\"memory-bank_tasks.md\":\"B0bEBdC2\",\"memory-bank_techcontext.md\":\"DAwhX72m\",\"programming-typescript_chapter1.md\":\"BRrt684F\",\"programming-typescript_chapter10.md\":\"BQMwIE9c\",\"programming-typescript_chapter11.md\":\"C2ZD7T0I\",\"programming-typescript_chapter12.md\":\"D39GctRn\",\"programming-typescript_chapter2.md\":\"DO34gqC5\",\"programming-typescript_chapter3.md\":\"Cg3QiNGo\",\"programming-typescript_chapter4.md\":\"C3PI9d6J\",\"programming-typescript_chapter5.md\":\"CpKD6q9a\",\"programming-typescript_chapter6.md\":\"D8IKm8uK\",\"programming-typescript_chapter7.md\":\"EGf82lJ9\",\"programming-typescript_chapter8.md\":\"bV1u47ds\",\"programming-typescript_chapter9.md\":\"CWfb724z\",\"programming-typescript_index.md\":\"2jblDn9V\",\"programming-typescript_preface.md\":\"qMdRpas5\",\"readme.md\":\"BaP-dEUw\",\"summary_index.md\":\"BOkkKIWM\",\"summary_冷门-递归深度.md\":\"CG_Yrk7o\",\"summary_判断两个类型相等.md\":\"Bym2lJg2\",\"summary_基操-判断两个类型相等.md\":\"BKkXeDPs\",\"summary_进阶-计数-加减乘除.md\":\"BZi8og-d\",\"tsconfig_best-practices.md\":\"BdDIb6XV\",\"tsconfig_core.md\":\"BmZ09isE\",\"tsconfig_index.md\":\"B9xOipvi\",\"tsconfig_templates.md\":\"C2TwpzD4\",\"type-challenges_easy.md\":\"hhdUYOZc\",\"type-challenges_extreme.md\":\"CDw3UI6s\",\"type-challenges_hard.md\":\"4dE3dxgN\",\"type-challenges_index.md\":\"BEI2y-D9\",\"type-challenges_medium.md\":\"DjamDb_Q\",\"type-challenges_problems_easy_00004-pick.md\":\"CXhfGSEN\",\"type-challenges_problems_easy_00007-readonly.md\":\"dNetlxPN\",\"type-challenges_problems_easy_00011-tuple-to-object.md\":\"DCRJdi2u\",\"type-challenges_problems_easy_00014-first.md\":\"DQcXz_NP\",\"type-challenges_problems_easy_00018-tuple-length.md\":\"2TpGUZIx\",\"type-challenges_problems_easy_00043-exclude.md\":\"CgKpQK9R\",\"type-challenges_problems_easy_00189-awaited.md\":\"BimsWDo5\",\"type-challenges_problems_easy_00268-if.md\":\"BGCCx4tF\",\"type-challenges_problems_easy_00533-concat.md\":\"Ct5UNMvi\",\"type-challenges_problems_easy_00898-includes.md\":\"Bl6J5P_2\",\"type-challenges_problems_easy_03057-push.md\":\"CI1qFRQK\",\"type-challenges_problems_easy_03060-unshift.md\":\"CdMT3Ar8\",\"type-challenges_problems_easy_03312-parameters.md\":\"DtTFDbBX\",\"type-challenges_problems_extreme_00005-getreadonlykeys.md\":\"hyARneg1\",\"type-challenges_problems_extreme_00151-querystringparser.md\":\"Ds-hrW7D\",\"type-challenges_problems_extreme_00216-实现slice.md\":\"CRHRFdgD\",\"type-challenges_problems_extreme_00274-整数比较器.md\":\"CdAiwM7C\",\"type-challenges_problems_extreme_00462-柯里化2.md\":\"gOxhSWx5\",\"type-challenges_problems_extreme_00476-sum.md\":\"z5c5b1Mq\",\"type-challenges_problems_hard_00006-simplevue.md\":\"DVYUok1w\",\"type-challenges_problems_hard_00017-柯里化1.md\":\"D6IwPG1c\",\"type-challenges_problems_hard_00055-uniontointersection.md\":\"B056o_ns\",\"type-challenges_problems_hard_00057-获取必填属性.md\":\"Ptjt1CUV\",\"type-challenges_problems_hard_00058-获取可选属性.md\":\"3rQpdWNF\",\"type-challenges_problems_hard_00089-获取必填属性键值.md\":\"2fnXc4Sc\",\"type-challenges_problems_hard_00090-获取可选属性键值.md\":\"BCNHG4Fh\",\"type-challenges_problems_hard_00112-大写首字母.md\":\"CqpPF0Fu\",\"type-challenges_problems_hard_00114-camelcase.md\":\"BrL51gDr\",\"type-challenges_problems_hard_00147-cprintfparser.md\":\"s-vWCC0F\",\"type-challenges_problems_hard_00213-vuebasicprops.md\":\"CzJHXrVE\",\"type-challenges_problems_hard_00223-isany.md\":\"CE50OOLb\",\"type-challenges_problems_hard_00270-get.md\":\"A5UYcM56\",\"type-challenges_problems_hard_00300-stringtonumber.md\":\"Co5HPH2f\",\"type-challenges_problems_hard_00399-元组过滤器.md\":\"fQ1jSXl_\",\"type-challenges_problems_hard_00472-元组转enumobject.md\":\"gzslNaVu\",\"type-challenges_problems_hard_00545-printf.md\":\"C3JTaqUZ\",\"type-challenges_problems_hard_00553-deepobjecttounique.md\":\"DcEMvP0e\",\"type-challenges_problems_hard_00651-字符长度2.md\":\"CfN58UVe\",\"type-challenges_problems_hard_00730-联合转元组.md\":\"BNd6IORV\",\"type-challenges_problems_hard_00847-stringjoin.md\":\"DZJ-gi85\",\"type-challenges_problems_hard_00956-deeppick.md\":\"Cx9E1lyt\",\"type-challenges_problems_hard_01290-pinia.md\":\"BQdooj-V\",\"type-challenges_problems_hard_01383-camelize.md\":\"lIL1Ti0D\",\"type-challenges_problems_hard_02070-dropstring.md\":\"BuLxC6Nl\",\"type-challenges_problems_hard_02822-split.md\":\"C9EA9ibQ\",\"type-challenges_problems_hard_02828-classpublickeys.md\":\"RC74q-tN\",\"type-challenges_problems_hard_02857-isrequiredkey.md\":\"CKTFV9yU\",\"type-challenges_problems_hard_02949-objectfromentries.md\":\"Cn5Gb9ax\",\"type-challenges_problems_hard_04037-判断波兰数.md\":\"CEbcwx-a\",\"type-challenges_problems_hard_05181-mutablekeys.md\":\"C_XnnExc\",\"type-challenges_problems_hard_05423-intersection.md\":\"BO3GKgz3\",\"type-challenges_problems_hard_06141-二进制转十进制.md\":\"DhLHrv80\",\"type-challenges_problems_hard_07258-objectkeypaths.md\":\"mYQXBh6t\",\"type-challenges_problems_hard_08804-两数之和.md\":\"D1ZdIz6c\",\"type-challenges_problems_hard_09155-判断日期有效性.md\":\"B3PojxVK\",\"type-challenges_problems_hard_09160-assign.md\":\"BTs3PetY\",\"type-challenges_problems_hard_09384-maximum.md\":\"CNncHFAD\",\"type-challenges_problems_hard_09775-大写keys.md\":\"J7Wgmz1c\",\"type-challenges_problems_hard_13580-replaceunions.md\":\"D7uU7ED9\",\"type-challenges_problems_hard_14080-fizzbuzz.md\":\"CY8BYuf0\",\"type-challenges_problems_hard_14188-run-lengthencoding.md\":\"ByXjPGbE\",\"type-challenges_problems_hard_15260-treepatharray.md\":\"6xgaAY_X\",\"type-challenges_problems_hard_19458-snakecase.md\":\"BOXMfJTo\",\"type-challenges_problems_medium_00002-获取函数返回类型.md\":\"BB3ZjKgw\",\"type-challenges_problems_medium_00003-实现omit.md\":\"t1RzpDdr\",\"type-challenges_problems_medium_00008-readonly2.md\":\"Mqq4K7OF\",\"type-challenges_problems_medium_00009-实现deepreadonly.md\":\"CN4U4eCE\",\"type-challenges_problems_medium_00010-元组转联合.md\":\"CUoSsMM2\",\"type-challenges_problems_medium_00012-可串联构造器.md\":\"Ewdnxu2l\",\"type-challenges_problems_medium_00015-最后一个元素.md\":\"DHSSmvr2\",\"type-challenges_problems_medium_00016-实现pop.md\":\"DraGpxiS\",\"type-challenges_problems_medium_00020-实现promise.all.md\":\"DLLZxNc3\",\"type-challenges_problems_medium_00062-实现typelookup.md\":\"B1uY7lqb\",\"type-challenges_problems_medium_00106-实现trimleft.md\":\"B6MWReBC\",\"type-challenges_problems_medium_00108-实现trim.md\":\"DR38hJWV\",\"type-challenges_problems_medium_00110-实现capitalize.md\":\"C8e09Qjq\",\"type-challenges_problems_medium_00116-实现replace.md\":\"Dk9mNuiJ\",\"type-challenges_problems_medium_00119-实现replaceall.md\":\"Se1cX1q4\",\"type-challenges_problems_medium_00191-追加参数.md\":\"CQOVbZiB\",\"type-challenges_problems_medium_00296-实现全排列.md\":\"BArRmMYj\",\"type-challenges_problems_medium_00298-计算字符的长度.md\":\"DP9TnC72\",\"type-challenges_problems_medium_00459-实现flatten.md\":\"Cyllb5xO\",\"type-challenges_problems_medium_00527-appendtoobject.md\":\"BS-fp1L1\",\"type-challenges_problems_medium_00529-实现absolute.md\":\"D9tBv4Xx\",\"type-challenges_problems_medium_00531-字符转联合.md\":\"BXgqDF--\",\"type-challenges_problems_medium_00599-实现merge.md\":\"DXyaj6Dc\",\"type-challenges_problems_medium_00612-实现kebabcase.md\":\"CiQcCNSO\",\"type-challenges_problems_medium_00645-实现diff.md\":\"A24_wQkt\",\"type-challenges_problems_medium_00949-anyof.md\":\"BBdckG1a\",\"type-challenges_problems_medium_01042-isnever.md\":\"DWgkYaGL\",\"type-challenges_problems_medium_01097-isunion.md\":\"CCbA1wof\",\"type-challenges_problems_medium_01130-实现replacekeys.md\":\"D5v8Bkqa\",\"type-challenges_problems_medium_01367-移除索引签名.md\":\"-XL59UjJ\",\"type-challenges_problems_medium_01978-百分比解析器.md\":\"Cj2HrLbY\",\"type-challenges_problems_medium_02070-从字符串中剔除指定字符.md\":\"BLj5Aa5Q\",\"type-challenges_problems_medium_02257-减一.md\":\"_TiJZcwE\",\"type-challenges_problems_medium_02595-实现pickbytype.md\":\"DGySNLwz\",\"type-challenges_problems_medium_02688-实现startwith.md\":\"LC8lr7Q9\",\"type-challenges_problems_medium_02693-实现endswith.md\":\"Cr793vnH\",\"type-challenges_problems_medium_02757-实现partialbykeys.md\":\"CqU1kxEq\",\"type-challenges_problems_medium_02759-实现requiredbykeys.md\":\"BbcBEhKd\",\"type-challenges_problems_medium_02793-实现mutable.md\":\"C1yhi0aD\",\"type-challenges_problems_medium_02852-实现omitbytype.md\":\"BVdhsdC6\",\"type-challenges_problems_medium_02946-实现objectentries.md\":\"BaHSgkbe\",\"type-challenges_problems_medium_03062-实现shift.md\":\"KkmMnzEi\",\"type-challenges_problems_medium_03188-元组转nested对象.md\":\"d3-OEaXx\",\"type-challenges_problems_medium_03192-实现reverse.md\":\"D6usNuU3\",\"type-challenges_problems_medium_03196-反转入参.md\":\"DGf0pwLj\",\"type-challenges_problems_medium_03242-实现flattendepth.md\":\"BlmvE83T\",\"type-challenges_problems_medium_03326-bemstylestring.md\":\"nruQgFN4\",\"type-challenges_problems_medium_03376-实现中序遍历.md\":\"BzQG37nO\",\"type-challenges_problems_medium_04179-实现flip.md\":\"Dyc1yF7V\",\"type-challenges_problems_medium_04182-实现斐波那契序列.md\":\"7YHYy0-b\",\"type-challenges_problems_medium_04260-实现所有组合.md\":\"BcZSmxab\",\"type-challenges_problems_medium_04425-实现比较.md\":\"Bhgg4UiE\",\"type-challenges_problems_medium_04471-实现zip.md\":\"FwWJ2ad2\",\"type-challenges_problems_medium_04484-isunion.md\":\"8AFsZ02R\",\"type-challenges_problems_medium_04499-chunk.md\":\"CQ6nZPel\",\"type-challenges_problems_medium_04518-fill.md\":\"CZFR7S8T\",\"type-challenges_problems_medium_04803-trimright.md\":\"ChzFdwcl\",\"type-challenges_problems_medium_05117-去除数组指定元素.md\":\"EUQApePd\",\"type-challenges_problems_medium_05140-trunc.md\":\"B9Bxyx21\",\"type-challenges_problems_medium_05153-indexof.md\":\"DUKMkazq\",\"type-challenges_problems_medium_05310-join.md\":\"AuA1lhtU\",\"type-challenges_problems_medium_05317-lastindexof.md\":\"Dg8Jz7gh\",\"type-challenges_problems_medium_05360-unique.md\":\"yoU93rmf\",\"type-challenges_problems_medium_05821-maptypes.md\":\"Di86hXvP\",\"type-challenges_problems_medium_07544-构造一个给定长度的元组.md\":\"D2G1gSx7\",\"type-challenges_problems_medium_08640-生成一定范围内的数字.md\":\"B3IoztsV\",\"type-challenges_problems_medium_08767-combination.md\":\"BIZN1gXL\",\"type-challenges_problems_medium_08987-subsequence.md\":\"C3PELdCA\",\"type-challenges_problems_medium_09142-checkrepeatedchars.md\":\"yu6XqxZj\",\"type-challenges_problems_medium_09286-firstuniquecharindex.md\":\"D9IWm-ff\",\"type-challenges_problems_medium_09896-获取数组的中间元素.md\":\"DBzpk-bE\",\"type-challenges_problems_medium_10969-整数.md\":\"CCE7gcnV\",\"type-challenges_problems_medium_16259-转换为基本类型.md\":\"BMLYHoSv\",\"type-challenges_problems_medium_17973-deepmutatable.md\":\"RP33Xfmz\",\"type-challenges_problems_medium_18142-all.md\":\"Ci22T85f\",\"type-challenges_problems_medium_18220-filter.md\":\"BDW7uDJ5\",\"type-challenges_solving-guide.md\":\"8bRdYSH4\",\"type-challenges_techniques.md\":\"BLPsup45\",\"utils_index.md\":\"CMUiYlV2\",\"you-dont-know-js_index.md\":\"IgyE8nCE\",\"you-dont-know-js_volume-1_index.md\":\"BhoAZMiZ\",\"you-dont-know-js_volume-1_scope-closures.md\":\"VqD_a_zU\",\"you-dont-know-js_volume-1_this-object-prototypes.md\":\"5rDQtTkb\",\"you-dont-know-js_volume-2_async-performance.md\":\"N-vHYQ9d\",\"you-dont-know-js_volume-2_index.md\":\"CQphCkAl\",\"you-dont-know-js_volume-2_types-grammar.md\":\"DSbQ7pUi\",\"you-dont-know-js_volume-3_es6-beyond.md\":\"CEiGRmdk\",\"you-dont-know-js_volume-3_getting-started.md\":\"ClArxegx\",\"you-dont-know-js_volume-3_index.md\":\"CeEeFUOl\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"TypeScript 设计与实践研究\",\"description\":\"深入研究 TypeScript 的类型系统、设计模式和最佳实践\",\"base\":\"/typescript-note/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"outline\":{\"label\":\"本页内容\"},\"search\":{\"provider\":\"local\"},\"lastUpdated\":{\"text\":\"最后更新于\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"medium\"}},\"docFooter\":{\"prev\":\"上一页\",\"next\":\"下一页\"},\"darkModeSwitchLabel\":\"外观\",\"sidebarMenuLabel\":\"菜单\",\"returnToTopLabel\":\"返回顶部\",\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"书籍研究\",\"link\":\"/programming-typescript/\",\"activeMatch\":\"/programming-typescript/\"},{\"text\":\"JavaScript深入\",\"link\":\"/you-dont-know-js/\",\"activeMatch\":\"/you-dont-know-js/\"},{\"text\":\"类型挑战\",\"link\":\"/type-challenges/\",\"activeMatch\":\"/type-challenges/\"},{\"text\":\"TSConfig\",\"link\":\"/tsconfig/\",\"activeMatch\":\"/tsconfig/\"},{\"text\":\"示例代码\",\"link\":\"/examples/\",\"activeMatch\":\"/examples/\"},{\"text\":\"工具函数\",\"link\":\"/utils/\",\"activeMatch\":\"/utils/\"}],\"sidebar\":{\"/programming-typescript/\":[{\"text\":\"《Programming TypeScript》研究\",\"items\":[{\"text\":\"概述\",\"link\":\"/programming-typescript/\"},{\"text\":\"前言\",\"link\":\"/programming-typescript/preface\"},{\"text\":\"第1章：介绍\",\"link\":\"/programming-typescript/chapter1\"},{\"text\":\"第2章：TypeScript概览\",\"link\":\"/programming-typescript/chapter2\"},{\"text\":\"第3章：类型系统\",\"link\":\"/programming-typescript/chapter3\"},{\"text\":\"第4章：函数\",\"link\":\"/programming-typescript/chapter4\"},{\"text\":\"第5章：类和接口\",\"link\":\"/programming-typescript/chapter5\"},{\"text\":\"第6章：高级类型\",\"link\":\"/programming-typescript/chapter6\"},{\"text\":\"第7章：错误处理\",\"link\":\"/programming-typescript/chapter7\"},{\"text\":\"第8章：异步编程、并发和并行\",\"link\":\"/programming-typescript/chapter8\"},{\"text\":\"第9章：前后端框架\",\"link\":\"/programming-typescript/chapter9\"},{\"text\":\"第10章：命名空间和模块\",\"link\":\"/programming-typescript/chapter10\"},{\"text\":\"第11章：与JavaScript互操作\",\"link\":\"/programming-typescript/chapter11\"},{\"text\":\"第12章：构建和运行 typescript\",\"link\":\"/programming-typescript/chapter12\"}]}],\"/you-dont-know-js/\":[{\"text\":\"《你不知道的 JavaScript》研究\",\"items\":[{\"text\":\"概述\",\"link\":\"/you-dont-know-js/\"},{\"text\":\"第一卷（上卷）\",\"collapsed\":false,\"items\":[{\"text\":\"作用域和闭包\",\"link\":\"/you-dont-know-js/volume-1/scope-closures\"},{\"text\":\"this 和对象原型\",\"link\":\"/you-dont-know-js/volume-1/this-object-prototypes\"}]},{\"text\":\"第二卷（中卷）\",\"collapsed\":true,\"items\":[{\"text\":\"类型和语法\",\"link\":\"/you-dont-know-js/volume-2/types-grammar\"},{\"text\":\"异步和性能\",\"link\":\"/you-dont-know-js/volume-2/async-performance\"}]},{\"text\":\"第三卷（下卷）\",\"collapsed\":true,\"items\":[{\"text\":\"起步上路\",\"link\":\"/you-dont-know-js/volume-3/getting-started\"},{\"text\":\"ES6 及更新版本\",\"link\":\"/you-dont-know-js/volume-3/es6-beyond\"}]}]}],\"/type-challenges/\":[{\"text\":\"TypeScript 类型挑战\",\"items\":[{\"text\":\"概述\",\"link\":\"/type-challenges/\"},{\"text\":\"解题思路指南\",\"link\":\"/type-challenges/solving-guide\"},{\"text\":\"技巧总结\",\"link\":\"/type-challenges/techniques\"},{\"text\":\"简单挑战\",\"link\":\"/type-challenges/easy\"},{\"text\":\"中等挑战\",\"link\":\"/type-challenges/medium\"},{\"text\":\"困难挑战\",\"link\":\"/type-challenges/hard\"},{\"text\":\"极限挑战\",\"link\":\"/type-challenges/extreme\"}]}],\"/tsconfig/\":[{\"text\":\"TSConfig 配置研究\",\"items\":[{\"text\":\"概述\",\"link\":\"/tsconfig/\"},{\"text\":\"核心配置\",\"link\":\"/tsconfig/core\"},{\"text\":\"项目配置模板\",\"link\":\"/tsconfig/templates\"},{\"text\":\"最佳实践\",\"link\":\"/tsconfig/best-practices\"}]}],\"/utils/\":[{\"text\":\"通用工具函数\",\"items\":[{\"text\":\"概述\",\"link\":\"/utils/\"}]}]},\"socialLinks\":[{\"icon\":\"gitee\",\"link\":\"https://gitee.com/wangjuntian/jt-typescript-design\"}],\"footer\":{\"message\":\"基于 TypeScript 研究项目\",\"copyright\":\"Copyright © 2023-present\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>